<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Dubbing and Audio description Profiles of TTML2</title>
    <script defer src="https://www.w3.org/Tools/respec/respec-w3c" class="remove"></script>
    <script class="remove">
      var respecConfig = {
      // specification status (e.g. WD, LCWD, NOTE, etc.). If in doubt use ED.
      specStatus: "ED",

      // the specification's short name, as in https://www.w3.org/TR/short-name/
      shortName: "dapt",

      // if there a publicly available Editor's Draft, this is the link
      edDraftURI: "https://w3c.github.io/dapt/",

      // editors, add as many as you like
      // only "name" is required
      editors:  [
        { name: "Cyril Concolato", w3cid: "36324", mailto: "cconcolato@netflix.com", url: "", company: "Netflix", companyURL: "https://www.netflix.com/"},
        { name: "Nigel Megitt", w3cid: "64750", mailto: "nigel.megitt@bbc.co.uk", url: "", company: "British Broadcasting Corporation", companyURL: "https://www.bbc.co.uk"},
      ],

      // name of the WG
      group: "wg/timed-text",
      github: "w3c/dapt",
      wgPublicList: "public-tt",
      license: "document",

      // local bibliography
      localBiblio: {
          "BBC-WHP051": {
            title: "BBC R&D White Paper WHP 051. Audio Description: what it is and how it works",
            publisher: "N.E. Tanton, T. Ware and M. Armstrong",
            status: "October 2002 (revised July 2004)",
            href: "http://www.bbc.co.uk/rd/publications/whitepaper051",
          },
          "EBU-R37": {
            title: "EBU Recommendation R37-2007. The relative timing of the sound and vision components of a television signal",
            publisher: "EBU/UER",
            status: "February 2007",
            href: "https://tech.ebu.ch/publications/r037"
          }
      },
    };
    </script>
  <style>
table.coldividers td + td { border-left:1px solid gray; }
  table.syntax { border: 0px solid black; width: 85%; border-collapse: collapse }
  table.syntax caption { font-weight: bold; text-align: left; padding-bottom: 0.5em }
  table.syntax th { border: 0px solid black; text-align: left }
  table.syntax td { border: 0px solid black }
  table.syntax div { background-color: #ffffc8 }
  table#table-features-and-extensions tbody tr td:nth-child(2) { text-align: center;}
  div.exampleInner { background-color: #fafafa;
                   border-top-width: 4px;
                   border-top-style: double;
                   border-top-color: #d3d3d3;
                   border-bottom-width: 4px;
                   border-bottom-style: double;
                   border-bottom-color: #d3d3d3;
                   padding: 4px; margin: 0em }
  ul.short-list { margin: 0; padding-left: 0; list-style-position: inside;}
  .note {font-size:small}
  .equation {text-indent: 10%;}
  .example {font-size: small}
  .inline-note {font-size: small}
  .deprecation {background-color: #EBEBFE; border: 3px double; margin: 2px;}
  .deprecation::before {content: "\26A0"; margin:0.2em; font-size:2em; float:left;}
  body {
    font-family: sans-serif;
    line-height: 24px;
  }
  span.label {
    display: inline-block;
    border-radius: 3px;
  }
  span.optional::before {
    content: "\00A0?\00A0";
    font-weight: bold;
  }
  span.permitted::before {
    content: "\00A0\2713\00A0";
  }
  span.prohibited::before {
    content: "\00A0\2718\00A0";
  }
  span.permitted-deprecated::before {
    font-weight: bold;
    content: "\00A0!\00A0";
  }
  span.label.required::before, span.label.required::after {
    font-weight: bold;
    color: white;
    content: "\00A0!!\00A0";
  }
  span.label::after {
    content: "\00A0";
  }
  span.optional {
    color: black;
    background-color: #FFFF50;
    border-color: #444444;
    border-style: solid;
    border-width: 1px;
  }
  span.permitted {
    color: black;
    background-color: #50FF50;
  }
  span.prohibited {
    color: black;
    background-color: #FF5F5F;
  }
  span.permitted-deprecated {
    color: black;
    background-color: #FFC000;
  }
  span.required {
    color: white;
    background-color: black;
  }
  </style>
  </head>
  <body>
    <h1 id="title">Dubbing and Audio description Profiles of TTML2</h1>
    
    <section id="abstract">
      This specification defines <abbr title="Dubbing and Audio description Profiles of TTML2">DAPT</abbr>, a <abbr title="Timed Text Markup Language">TTML</abbr>-based file format for the exchange of timed text content in dubbing and audio description workflows.
    </section>

    <section id="sotd" class="updateable-rec">
    </section>

    <section id="scope">
      <h2>Scope</h2>
      <p>This specification defines a text-based profile of the Timed Text Markup Language version 2.0 [[ttml2]]
        intended to support dubbing and <a>audio description</a> workflows worldwide,
        to meet the requirements defined in [[?DAPT-REQS]], and to permit usage of visual presentation
        features within [[ttml2]] and its profiles, for example those in [[ttml-imsc1.2]].</p>
    </section>

    <section class="informative" id="introduction">
      <h2>Introduction</h2>
      <section id="intro-overview">
        <h3>Transcripts and Scripts</h3>
        <p>A <dfn>transcript</dfn> is a text representation of <i>pre-existing</i> media in another form,
          for example the dialogue in a video;
          a <dfn>script</dfn> is a text representation of the <i>intended</i> content of media prior to its creation,
          for example to guide an actor in recording an audio track.
          Within this specification the term <a>DAPT script</a> is used generically to refer to both <a>transcripts</a> and <a>scripts</a>.
          <a>DAPT Scripts</a> consist of timed text and associated metadata,
          such as the character speaking.
        </p>
        <p>In dubbing workflows, a <a>transcript</a> is generated and translated to create a <a>script</a>.
          In audio description workflows, a <a>transcript</a> describes the video image,
          and is then used directly as a <a>script</a> for recording an audio equivalent.
        </p>
        <p>DAPT is a TTML-based format for the exchange of <a>transcripts</a> and <a>scripts</a>
          (i.e. <a>DAPT Scripts</a>)
          among authoring, prompting and playback tools in the localization and <a>audio description</a> pipelines.
          A <dfn>DAPT document</dfn> is a serializable form of a <a>DAPT Script</a> designed to carry pertinent information for dubbing or <a>audio description</a>
          such as type of <a>DAPT script</a>, dialogue, descriptions, timing, metadata, original language transcribed text, translated text, language information, and audio mixing instructions,
          and to be extensible to allow user-defined annotations or additional future features.</p>
        <p>This specification defines the data model for <a>DAPT scripts</a> and
          its representation as a [[ttml2]] document (see [[[#data-model]]])
          with some constraints and restrictions (see [[[#profile-constraints]]]).</p>
        <p>A <a>DAPT script</a> is expected to be used to make audio visual media accessible
          or localized for users who cannot understand it in its original form,
          and to be used as part of the solution for meeting user needs
          involving <a>transcripts</a>, including accessibility needs described in [[media-accessibility-reqs]],
          as well as supporting users who need dialogue translated into a different language via dubbing.</p>
        <p>The authoring workflow for both dubbing and audio description involves similar stages,
          that share common requirements as described in [[dapt-reqs]].
          In both cases, the author reviews the content and
          writes down what is happening, either in the dialogue or in the video image,
          alongside the time when it happens.
          Further transformation processes can change the text to a different language and
          adjust the wording to fit precise timing constraints.
          Then there is a stage in which an audio rendering of the <a>script</a> is generated,
          for eventual mixing into the programme audio.
          That mixing can occur prior to distribution,
          or in the client directly.</p>
        <section id="intro-dubbing">
          <h4>Dubbing <a>scripts</a></h4>
          <p>A <dfn>dubbing script</dfn> is a <a>transcript</a> or <a>script</a>
            (depending on workflow stage) used for
            recording translated dialogue to be mixed with the non-dialogue programme audio,
            to generate a localized version of the programme in a different language,
            known as a dubbed version, or dub for short.
            Creating a <a>dubbing script</a> is a complex, multi-step process involving:</p>
          <ul>
            <li>Transcribing and timing the dialogue in the original language from a completed programme to create a <a>transcript</a>;</li>
            <li>Notating dialogue with character information and other annotations;</li>
            <li>Generating localization notes to guide further adaptation;</li>
            <li>Translating the dialogue to a target language <a>script</a>;</li>
            <li>Adapting the translation to the dubbing and subtitling specifications;
              for example matching the actor’s lip movements in the case of dubs and considering reading speeds and shot changes.</li>
          </ul>
          <p><a>Dubbing scripts</a> can be useful as a starting point for creation of subtitles or closed captions in alternate languages.
            This specification is designed to facilitate the addition of, and conversion to,
            subtitle and caption documents in other profiles of TTML, such as [[ttml-imsc1.2]],
            for example by permitting subtitle styling syntax to be carried in <a>DAPT documents</a>.
            Alternatively, styling can be applied to assist voice artists when recording scripted dialogue.
          </p>
        </section> <!-- intro-dubbing -->
        <section id="intro-audio-description">
          <h4>Audio Description <a>scripts</a></h4>
          <p>Creating audio description content is also a multi-stage process.
            An <dfn>audio description</dfn>,
            also known as video description
            or in [[media-accessibility-reqs]] as <a data-cite="media-accessibility-reqs#described-video">described video</a>,
            is an audio service
            to assist viewers who can not fully see a visual presentation to understand the content.
            It is the result of the audio rendition of one or more <a>descriptions</a>
            mixed with the audio associated with the programme prior to any mixing with audio description
            (sometimes referred to as <dfn>main programme audio</dfn>),
            at moments when this does not clash with dialogue, to deliver an audio description mixed audio track.
            A <dfn>description</dfn> is a set of words that describes an aspect of the programme presentation,
            suitable for rendering into audio by means of vocalisation and recording
            or used as a text alternative source for text to speech translation, as defined in [[WCAG22]].
            More information about what <a>audio description</a> is and how it works can be found at [[BBC-WHP051]].
          </p>
          <p>Writing the audio description <a>script</a> typically involves:</p>
          <ul>
            <li>watching the video content of the programme,
            or series of programmes,</li>
            <li>identifying the key moments during which there is an opportunity to speak descriptions,</li>
            <li>writing the description text to explain the important visible parts of the programme at that time,</li>
            <li>creating an audio version of the descriptions, either by recording a human actor or using text to speech,</li>
            <li>defining mixing instructions (applied using [[ttml2]] audio styling) for combining the audio with the programme audio.</li>
          </ul> 
          <p>The audio mixing can occur prior to distribution of the media,
            or in the client player.
            If the <a>audio description</a> <a>script</a> is delivered to the player,
            the text can be used to provide an alternative rendering,
            for example on a Braille display,
            or using the user's configured screen reader.
          </p>
        </section> <!-- intro-audio-description -->
      </section> <!-- intro-overview -->

      <section id="intro-example">
        <h3>Example documents</h3>
        <h4>Basic document structure</h4>
        <p>The top level structure of a document is as follows.
          The <code>xmlns</code> attribute and the <code>&lt;tt&gt;</code> element indicate that this is a TTML document
          and the <a><code>ttp:contentProfiles</code></a> attribute indicates that it adheres to the DAPT <a>content profile</a> defined in this specification.
          The <code>daptm:scriptType</code> attribute indicates the type of script
          but in this empty example, it is not relevant, as only the structure of the document is shown.
          The structure is applicable to all types of <a>DAPT scripts</a>, dubbing or <a>audio description</a>.</p>
        <pre class="example"
          data-include="examples/intro-top-level.xml"
          data-include-format="text">
        </pre>
        <p>The following examples correspond to the timed text <a>scripts</a> produced
          at each stage of the workflow described in [[DAPT-REQS]].</p>
        <p>The first example shows a <a>script</a> where timed opportunities for descriptions
          or transcriptions have been identified but no text has been written:</p>
        <pre class="example"
          data-include="examples/intro-times-only.xml"
          data-include-format="text">
        </pre>
        <p>The following examples will demonstrate different uses in dubbing and audio description workflows.</p>

        <h4>Audio Description Examples</h4>
        <p>When descriptions are added this becomes a Pre Recording <a>Script</a>:</p>
        <pre class="example"
          data-include="examples/intro-times-and-text.xml"
          data-include-format="text">
        </pre>
        <p>After creating audio recordings, if not using text to speech, instructions for playback
          mixing can be inserted. For example, The gain of "received" audio can be changed before mixing in
          the audio played from inside the <code>span</code>, smoothly
          animating the value on the way in and returning it on the way out:
        </p>
        <pre class="example"
          data-include="examples/intro-script-with-gain.xml"
          data-include-format="text">
        </pre>
        <p>In the above example, the <code>div</code> element's
          <code>begin</code> time becomes the "syncbase" for its child, 
          so the times on the <code>animate</code> and <code>span</code> 
          elements are relative to 25s here.
          The first <code>animate</code> element drops the gain from 1
          to 0.39 over 0.3s, freezing that value after it ends,
          and the second one raises it back in the
          final 0.3s of this description. Then the <code>span</code> is
          timed to begin only after the first audio dip has finished.</p>
        <p>If the audio recording is long and just a snippet needs to be played,
        that can be done using <code>clipBegin</code> and <code>clipEnd</code>.
        If we just want to play the part of the audio from file from 5s to
        8s it would look like:</p>
        <pre class="example"
          data-include="examples/intro-script-with-audio-clipped.xml"
          data-include-format="text">
        </pre>
        <p>Or audio attributes can be added to trigger the text to be spoken:
        </p>
        <pre class="example"
          data-include="examples/intro-script-with-speak.xml"
          data-include-format="text">
        </pre>
        <p>It is also possible to embed the audio directly,
          so that a single document contains all of the script and
          recorded audio together:
        </p>
        <pre class="example"
          data-include="examples/intro-script-with-embedded-audio.xml"
          data-include-format="text">
        </pre>

        <h4>Dubbing Examples</h4>
        <p>From the basic structure of Example 1, a transcription of the audio programme produces an original language dubbing <a>script</a>,
          which can look as follows. No specific style or layout is defined, and here the focus is on the transcription of the dialogs.
          Characters are identified in the <code>metadata</code> section.</p>
        <pre class="example"
          data-include="examples/intro-original-language.xml"
          data-include-format="text">
        </pre>

        <p>After translating the text, the document is modified. It includes translation text, and
        in this case the original text is preserved. The main document language is changed to indicate
        that the focus is on the translated language:</p>
        <pre class="example"
          data-include="examples/intro-original-language-with-dub-language.xml"
          data-include-format="text">
        </pre>

        <p>The process of adaptation, before recording, could adjust the wording and/or add further timing to assist in the recording.
        The <code>daptm:scriptType</code> attribute is also modified, as in the following example:</p>
        <pre class="example"
          data-include="examples/intro-original-language-with-dub-language-and-adaptation.xml"
          data-include-format="text">
        </pre>
      </section>
    </section>

    <section id="conventions">
      <h2>Documentation Conventions</h2>
      <p>
        This document uses the same conventions as [[ttml2]] for the specification of parameter attributes, styling attributes and metadata elements. In particular:
      </p>
      <p>
        Section 2.3 of [[ttml2]] specifies conventions used in the [[XML]] representation of elements; and
        Sections 6.2 and 8.2 of [[ttml2]] specify conventions used when specifying the syntax of attribute values.
      </p>
      <p>
        This specification uses <dfn data-cite="ttml2#terms-feature">Feature</dfn> designations as defined in Appendices E at [[ttml2]]
        and defines <dfn data-cite="ttml2#terms-extension">Extension</dfn> designations:
        when making reference to content conformance,
        these designations refer to the syntactic expression or the semantic capability associated with each designated <a>Feature</a> or <a>Extension</a>;
        and when making reference to <dfn data-cite="ttml2#terms-processor">Processor</dfn> conformance,
        these designations refer to processing requirements associated with each designated <a>Feature</a> or <a>Extension</a>.
        If the name of an element referenced in this specification is not namespace qualified,
        then the TT namespace applies (see <a href="#namespaces">9.3 Namespaces</a>.)
      </p>
    </section>

  <section id="data-model">
    <h2>DAPT Data Model and corresponding TTML syntax</h2>
    <p>This section specifies the data model for DAPT and its corresponding TTML syntax.
      In the model, there are objects which can have properties and be associated with other objects.
      In the TTML syntax, these objects and properties are expressed as elements and attributes,
      though it is not always the case that objects are expressed as elements and properties as attributes.
    </p>
    <p>In <a href="#fig-class-diagram"></a> <a>shared properties</a> are shown in italics.
      All other conventions in the diagram are as per [[?uml]].
    </p>
    <figure id="fig-class-diagram">
      <div data-include="figures/class-diagram.svg"></div>
      <figcaption>
          Class diagram showing main entities in the DAPT data model.
      </figcaption>
    </figure>
    <p class="issue" data-number="116"></p>
    <section id="dapt-script">
      <h3>DAPT Script</h3>
        <p>A <dfn>DAPT Script</dfn> is a <a>transcript</a> or <a>script</a>
          that corresponds to a document processed within an authoring workflow or processed by a client,
          and conforms to the constraints of this specification.
          It has properties and objects defined in the following sections:
          <a>Script Type</a>, <a>Primary Language</a>, <a>Script Events</a> and, for <a>Dubbing Scripts</a>, <a>Characters</a>.</p>
        <p>A <a>DAPT Script</a> is represented as a TTML document with the structure and constraints also defined in the following sections.</p>
        <section>
          <h4>Script Type</h4>
          <p>The <dfn>Script Type</dfn> property is a mandatory property of a <a>DAPT Script</a>
            which describes the type of documents used in Dubbing and Audio Description workflows,
            among the following:
            <a>Original Language Transcript</a>,
            <a>Translated Transcript</a>,
            <a>Pre-recording Dub Script</a>,
            <a>As-recorded Dub Script</a>, and
            <a>Audio Description Script</a>.</p>
          <p>
            <a>Original Language Transcript</a>,
            <a>Translated Transcript</a>,
            <a>Pre-recording Dub Script</a>, and
            <a>As-recorded Dub Script</a>
            are referred to as <dfn>Dubbing Scripts</dfn>.</p>
          <p>To represent this property, the <dfn><code>daptm:scriptType</code></dfn> attribute MUST be present on the <code>&lt;tt&gt;</code> element:</p>
          <div class="exampleInner">
            <pre class="language-abnf">
  daptm:scriptType
    : "ORIGINAL_TRANSCRIPT"
    | "TRANSLATED_TRANSCRIPT"
    | "DUBBING_PRE_RECORDING"
    | "DUBBING_AS_RECORDED"
    | "AUDIO_DESCRIPTION"
            </pre>
          </div>

          <p>The definitions of the types of documents and the corresponding <code>daptm:scriptType</code> values are:
            <ul>
              <li>
                <dfn>Original Language Transcript</dfn>:
                <p>When the <code>daptm:scriptType</code> value is <code>ORIGINAL_TRANSCRIPT</code>,
                the document is a literal transcription of the dialogue and on-screen text in their original spoken/written language(s).</p>
                <p><a>Script Events</a> in this type of <a>transcript</a> SHOULD contain <a>Text</a> objects whose
                  <a>Text Language Source</a> is set to <a>Original</a>
                  and SHOULD NOT contain <a>Text</a> objects whose
                  <a>Text Language Source</a> is set to <a>Translation</a>.</p>
              <aside class="example">If a programme contains dialogue in English and Hebrew,
                the <a>Original Language Transcript</a> will contain some <a>Script Events</a> in English and some in Hebrew,
                all marked as <a>Original</a> <a>Text Language Source</a>.
                None of the <a>Script Events</a> is marked as <a>Translation</a>.</aside>
              </li>
              <li>
                <dfn>Translated Transcript</dfn>:
                <p>When the <code>daptm:scriptType</code> value is <code>TRANSLATED_TRANSCRIPT</code>,
                the document represents a translation of the <a>Original Language Transcript</a> in a common language.</p>
                <p>It can be adapted to produce a <a>Pre-Recording Dub Script</a>,
                  and/or used as the basis for producing translation subtitles,
                  or used as the basis for a further translation into the <a>Target Recording Language</a>.</p> 
                <p><a>Script Events</a> in this type of <a>transcript</a> SHOULD contain <a>Text</a> objects whose
                  <a>Text Language Source</a> is set to <a>Translation</a>.
                  They MAY also contain <a>Original</a> language <a>Text</a>.</p>
                <aside class="note">A <a>Script Event</a> in this type of <a>transcript</a> has a 
                  <a>Translation</a> <a>Text</a> object in the <a>Target Recording Language</a>
                  and can also contain an <a>Original</a> <a>Text</a> object, for context,
                  to assist in the adaption process.
                  It can also have <a>Translation</a> <a>Text</a> objects in other languages,
                  for example used as intermediate (&quot;pivot&quot;) translations,
                  or as additional context to assist in the adaptation process.</aside>
                <aside class="example">If a programme contains dialogue in English and Hebrew,
                  the French <a>Translated Transcript</a> will contain at least the translation in French of all <a>Script Events</a>.
                  It may still retain text content in Hebrew and English to assist further processing.</aside>
              </li>
              <li>
                <dfn>Pre-recording Dub Script</dfn>:
                <p>When the <code>daptm:scriptType</code> value is <code>DUBBING_PRE_RECORDING</code>,
                the document represents the result of the adaptation of a <a>Translated Transcript</a> for dubbing,
                e.g. for better lip-sync.</p>
                <p><a>Script Events</a> in this type of <a>script</a> SHOULD contain <a>Translation</a> <a>Text</a> objects
                  in the <a>Target Recording Language</a>
                  and MAY also contain <a>Original</a> <a>Text</a> objects from the <a>Original Language Transcript</a>
                  or <a>Translation</a> <a>Text</a> objects in other languages for context,
                  to assist further processing.</p>
                <aside class="note">The <a>Script Type</a> of a <a>DAPT Script</a> cannot necessarily be detected by inspecting the text content of the document.
                For example, the adaptation of a <a>Translated Transcript</a> into a <a>Pre-recording Dub Script</a>
                can consist in replacing some words in the text content of a <a>Script Event</a> without altering the rest of the document.
                In either case, <a>Text</a> objects that are translations have <a>Text Language Source</a> properties set to <a>Translation</a>.</aside>
              </li>
              <li>
                <dfn>As-recorded Dub Script</dfn>:
                <p>When the <code>daptm:scriptType</code> value is <code>DUBBING_AS_RECORDED</code>,
                  the document represents a transcription of the output of the dubbing workflow.</p>
                <p><a>Script Events</a> in this type of <a>script</a> SHOULD contain <a>Translation</a> <a>Text</a> objects
                  in the <a>Target Recording Language</a>
                  and MAY also contain <a>Original</a> <a>Text</a> objects from the <a>Original Language Transcript</a>
                  or <a>Translation</a> <a>Text</a> objects in other languages for for context and quality verification.</p>
                  <aside class="note">Even though the output of the dubbing workflow is in the same language as those
                  <a>Text</a> objects with the matching language,
                  the <a>Text Language Source</a> of those Text objects remains <a>Translation</a>
                  since they differ from the original language of the dialogue.</aside>
              </li>
              <li>
                <dfn>Audio Description Script</dfn>:
                <p>When the <code>daptm:scriptType</code> value is <code>AUDIO_DESCRIPTION</code>,
                  the document represents a <a>transcript</a> of the important visual contents of the
                  video written to be suitable for use as a <a>script</a>
                  for generating an audio representation.
                  It contains text, times, and optional links to audio and mixing instructions
                  for the purpose of producing an audio description audio track.</p>
                <p><a>Script Events</a> in this type of <a>script</a> SHOULD contain <a>Original</a> <a>Text</a> objects
                  and MAY contain <a>Translation</a> <a>Text</a> objects in other languages.
                  If the <a>Target Recording Language</a> is different to the <a>Primary language</a>
                  then <a>Script Events</a> in this type of <a>script</a> SHOULD contain <a>Translation</a> <a>Text</a> objects
                  in the <a>Target Recording Language</a>.</p>
                <aside class="note">The <a>Text</a> objects in Audio Description <a>Script Events</a> are each expected to have
                  a <a>Text Language Source</a> property of <a>Original</a> if their language is the <a>Primary Language</a>
                  or, when representing in-image text,
                  if they are in the same language as that text.
                  If audio description <a>scripts</a> are translated,
                  their translations would be marked as <a>Translation</a>.</aside>
              </li>
            </ul>
          </p>
          <p class="ednote">The following example is orphaned - move to the top of the section, before the enumerated script types?</p>
          <pre class="example">
&lt;tt daptm:scriptType=&quot;ORIGINAL_TRANSCRIPT&quot;&gt;
...
&lt;/tt&gt;
          </pre>
        </section>
        <section id="primary-language">
          <h4>Primary Language</h4>
          <p>The <dfn>Primary Language</dfn> is a mandatory property of a <a>DAPT Script</a>
            which represents the default language for the <a>Text</a> content of <a>Script Events</a>.
            It is represented in TTML with the following structure and constraints:
            <ul>
              <li>the <code>xml:lang</code> attribute MUST be present on the <code>tt</code> element and its value MUST NOT be empty.</li>
            </ul>
          </p>
          <p class="note">All text content in a <a>DAPT Script</a> has a specified language.
            When multiple languages are used, the <a>Primary Language</a> can correspond to the language of the majority of <a>Script Events</a>,
            to the language being spoken for the longest duration, or to the language arbitrarily chosen by the author.</p>
          <p class="note">Text content is marked either as being either in the <a>Original</a> language or
            as being a <a>Translation</a> independently of the <a>Primary Language</a>, using the <a>Text Language Source</a> property.</p>
          <aside class="example">An <a>Original Language Transcript</a> <a>script</a> is prepared for a video
            containing dialogue in Danish and Swedish.
            The <a>Primary Language</a> is set to Danish by setting <code>xml:lang="da"</code> on the <code>&lt;tt&gt;</code> element.
            <a>Script Events</a> that contain Swedish <a>Text</a> override this by setting
            <code>xml:lang="sv"</code> on the <code>&lt;p&gt;</code> element.
            Script Events that contain Danish <a>Text</a> can set the <code>xml:lang</code> attribute
            or omit it, since the inherited language is the <a>Primary Language</a> of the document.
            In both cases the Script Events' <a>Text</a> objects are <code>&lt;p&gt;</code> elements that represent original language text
            and therefore set their <a>Text Language Source</a> to Original by setting <code>daptm:langSrc="original"</code>.</aside>
        </section>

        <section>
          <h4>Script Events</h4>
          <p>A <a>DAPT Script</a> MAY contain zero or more <a>Script Event</a> objects, each corresponding to dialogue, on screen text, or descriptions for a given time interval.</p>
        </section>

        <section>
          <h4>Characters</h4>
          <p>A <a>DAPT Script</a> MAY contain zero or more <a>Character</a> objects, each describing a character that can be referenced by a <a>Script Event</a>.</p>
        </section>

        <section>
          <h4>Shared properties</h4>
          <p>Some of the properties in the DAPT data model are common within more than one object type,
            and carry the same semantic everywhere they occur.
            These <dfn>shared properties</dfn> are listed in this section.
          </p>
          <p class="ednote">Would it be better to make a "Timed Object" class and subclass Script Event,
            Mixing Instruction and Audio Recording from it?
          </p>
          <section>
            <h5>Timing Properties</h5>
            <p>The following <dfn data-lt="timing property|timing properties">timing properties</dfn>
              define when the entities that contain them are active:
            </p>
            <ul>
              <li>The <dfn>Begin</dfn> property defines when an object becomes active,
                and is relative to the active begin time of the parent object.
                <a>DAPT Scripts</a> begin at time zero on the media timeline.
              </li>
              <li>The <dfn>End</dfn> property defines when an object stops being active,
                and is relative to the active begin time of the parent object.</li>
              <li>The <dfn>Duration</dfn> property defines the maximum duration of an object.</li>
                <p class="note">If both an <a>End</a> and a <a>Duration</a> property are present,
                  the end time is the earlier of <a>Begin</a> and <a>Begin</a> + <a>Duration</a>.</p>
            </ul>
            <div class="note">If any of the <a>timing properties</a> is omitted, the following rules apply:
              <ul>
                <li>The default value for <a>Begin</a> is zero, i.e. the same as the begin time of the parent object.</li>
                <li>The default value for <a>End</a> is indefinite,
                  i.e. it resolves to the same as the end time of the parent timed object,
                  if there is one.
                  The end time of a <a>DAPT Script</a> is for practical purposes the end of the <a>Related Media Object</a>.</li>
                <li>The default value for <a>Duration</a> is indefinite,
                  i.e. the end time resolves to the same as the end time of the parent object.</li>
              </ul>
            </div>
          </section>
        </section>
      </section>
      <section id="character">
        <h3>Character</h3>

        <p>In <a>Dubbing Scripts</a>, it is necessary to identify each character in the programme. This is done with a <dfn>Character</dfn> object which has the following properties: 
          <ul>
            <li>a mandatory <dfn data-lt="Character Identifier">Identifier</dfn>
            which is a unique identifier used to reference the character from elsewhere in the document,
            for example to indicate when a <a>Character</a> participates in a <a>Script Event</a>,
            or to link a <a>Character Style</a> to its <a>Character</a>.</li>
            <li>a mandatory <dfn data-lt="Character Name">Name</dfn> which is the name of the <a>Character</a> in the programme</li>
            <li>an optional <dfn data-lt="Character Talent Name">Talent Name</dfn>, which is the name of the actor speaking dialogue for this <a>Character</a></li>
            <li>zero or more <dfn data-lt="Character Style">Character Style</dfn> objects
              which can be applied to control the visual appearance of <a>Script Events</a> spoken by the <a>Character</a>,
              for example during recording by an actor or when transforming the <a>script</a> into subtitles.</li>
          </ul>
        </p>
        <p class="issue" data-number="66"></p>
        <p>A <a>Character</a> is represented in TTML with the following structure and constraints:</p>
        <ul>
          <li>If the <a>Character</a> has a <a>Talent Name</a> property:
            <ul>
              <li>A <code>&lt;ttm:agent&gt;</code> element corresponding to the <a>Talent Name</a> 
                MUST be present at the path
                <code>/tt/head/metadata/ttm:agent</code>, with the following constraints:
                <ul>
                  <li>its <code>type</code> attribute MUST be set to <code>person</code></li>
                  <li>its <code>xml:id</code> attribute MUST be set.</li>
                  <li>it MUST have a <code>&lt;ttm:name&gt;</code> child element whose
                    <code>type</code> MUST be set to <code>full</code> and its content set to the <a>Talent Name</a></li>
                </ul>
              </li>
              <li>If more than one <a>Character</a> is associated with the same
                <a>Talent Name</a> there SHOULD be a single
                <code>&lt;ttm:agent&gt;</code> element corresponding to that <a>Talent Name</a>,
                referenced separately by each of the <a>Characters</a>.</li>
              <li>Each <code>&lt;ttm:agent&gt;</code> element corresponding to a <a>Talent Name</a>
                SHOULD appear before any of the <a>Character</a> <code>&lt;ttm:agent&gt;</code> elements
                whose <code>&lt;ttm:actor&gt;</code> child element references it.</li>
            </ul>
          </li>

          <li>The <a>Character</a> is represented by a <code>&lt;ttm:agent&gt;</code> element present at the path
            <code>/tt/head/metadata/ttm:agent</code>, with the following constraints:
            <ul>
              <li>The <code>type</code> attribute MUST be set to <code>character</code>.</li>
              <li>The <code>xml:id</code> attribute MUST be present on the <code>ttm:agent</code> and set to the <a>Character Identifier</a>.</li>
              <li>The <code>ttm:agent</code> MUST contain a <code>ttm:name</code> element with its <code>type</code> attribute set to <code>alias</code> and its content set to the <a>Character Name</a>.</li>
              <li>If the Character has a <a>Talent Name</a>, it MUST contain a <code>&lt;ttm:actor&gt;</code> child element.
                That child element MUST have an <code>agent</code> attribute set to
                the <code>xml:id</code> of the <code>&lt;ttm:agent&gt;</code> element
                corresponding to the <a>Talent Name</a>,
                that is, whose <code>type</code> is set to <code>person</code>.</li>
            </ul>
          </li>

          <pre class="example">
...
&lt;metadata&gt;
  &lt;ttm:agent type=&quot;character&quot; xml:id=&quot;character_1&quot;&gt;
    &lt;ttm:name type=&quot;alias&quot;&gt;DESK CLERK&lt;/ttm:name&gt;
  &lt;/ttm:agent&gt;
&lt;/metadata&gt;
...
          </pre>

          <pre class="example">
...
&lt;metadata&gt;
  &lt;ttm:agent type=&quot;person&quot; xml:id=&quot;actor_A&quot;&gt;
    &lt;ttm:name type=&quot;full&quot;&gt;Matthias Schoenaerts&lt;/ttm:name&gt;
  &lt;/ttm:agent&gt;
  &lt;ttm:agent type=&quot;character&quot; xml:id=&quot;character_2&quot;&gt;
    &lt;ttm:name type=&quot;alias&quot;&gt;BOOKER&lt;/ttm:name&gt;
    &lt;ttm:actor agent=&quot;actor_A&quot;/&gt;
  &lt;/ttm:agent&gt;
&lt;/metadata&gt;
...
          </pre>
          <li>All <code>&lt;ttm:agent&gt;</code> elements SHOULD be contained in the first <code>&lt;metadata&gt;</code> element in the <code>&lt;head&gt;</code> element.
            <div class="note">There can be multiple <code>&lt;metadata&gt;</code> elements in the <code>&lt;head&gt;</code> element,
            for example to include <a href="#proprietary-metadata">proprietary metadata</a>
            but the above recommends that only one is used to define the characters.</div>
          </li>
        </ul>

        <p>A <a>Character Style</a> is represented in TTML with the following structure and constraints:</p>
        <ul>
          <li>Each <a>Character Style</a> is represented by one or more <code>&lt;style&gt;</code> elements
            at the path <code>/tt/head/styling/style</code>.</li>
          <li>Each such <code>&lt;style&gt;</code> element is associated with the <a>Character</a> by having a <code>ttm:agent</code> attribute
            whose value is the <code>xml:id</code> of the <code>&lt;ttm:agent&gt;</code> element representing the <a>Character</a>.</li>
          <li>A <a>Script Event</a> MAY apply <a>Character Styles</a> by including the <code>xml:id</code> of each style
            in the <code>style</code> attribute of the <code>&lt;div&gt;</code> element that defines that Script Event.</li>
          <li>A <a>Text</a> object MAY apply <a>Character Styles</a> by including  the <code>xml:id</code> of each style
            in the <code>style</code> attribute of the <code>&lt;p&gt;</code> element that defines that Text object.</li>
          <li>A <a>Script Event</a> SHOULD NOT apply a <a>Character Style</a> for a <a>Character</a> that is not associated with that Script Event.</li>
          <li>A <a>Text</a> object SHOULD NOT apply a <a>Character Style</a> for a <a>Character</a> that is not associated with that Text object's Script Event.</li>
        </ul>

        <p class="note">Any style attribute defined in [[ttml2]] or [[ttml-imsc1.2]]
          (or other profiles using non-W3C namespaces) can be present on the <code>&lt;style&gt;</code> element.</p>
        <p>A <code>&lt;style&gt;</code> element MAY omit the <code>ttm:agent</code> attribute if it is not associated with a <a>Character</a>.
          Such styles MAY be applied in the same way as any other style, via a reference in the <code>style</code> attribute.</p>
        <p>Character Styles are applied to <a>Script Events</a> and <a>Text</a> by using the <code>style</code> attribute to specify the set of applicable styles.
          <a>Presentation Processors</a> MUST NOT apply character styles to text if they are not specified using the <code>style</code> attribute.
        </p>
        <p class="issue" data-number="44"></p>
        <aside class="note">Given a document that specifies a <code>&lt;style&gt;</code> element with a <code>ttm:agent</code> attribute,
          and a <a>Script Event</a> with the same <code>ttm:agent</code> attribute value,
          but that does not reference (directly or by inheritance) that style using a <code>style</code> attribute,
          a <a>Presentation Processor</a> would not be conformant if it applied that style anyway, solely on the basis of the <code>ttm:agent</code>
          being the same.</aside>

        <pre class="example">
...
&lt;styling&gt;
  &lt;style xml:id=&quot;style_a&quot;
         ttm:agent=&quot;character_3&quot;
         tts:color=&quot;#FFFFFF&quot; tts:backgroundColor=&quot;#8F42AD&quot;/&gt;         
&lt;/styling&gt;     
...
  &lt;div xml:id="event_6" ttm:agent="character_3" style="style_a" ... &gt;
  &lt;-- Script event contents here, in Character 3's style --&gt;
  &lt;/div&gt;

  &lt;div xml:id="event_7" ttm:agent="character_3" style="some_other_style" ... &gt;
  &lt;-- Script event contents here, not in Character 3's style --&gt;
  &lt;/div&gt;
        </pre>

        <p class="issue" data-number="15"></p>
      </section>

      <section id="script-event">
        <h3>Script Event</h3>
        <p>A <dfn>Script Event</dfn> object represents dialogue, on screen text or audio descriptions to be spoken and has the following properties:
          <ul>
            <li>A mandatory <dfn>Script Event Identifier</dfn> which is unique in the <a>script</a></li>
            <li>An optional <a>Begin</a> property and an optional <a>End</a> and an optional <a>Duration</a> property
              that together define the <a>Script Event</a>'s time interval in the programme timeline
              <p class="note">Typically <a>Script Events</a> do not overlap in time. However, there can be cases where they do, e.g. in <a>Dubbing Scripts</a> when different <a>Characters</a> speak different text at the same time.</p>
            </li>
            <li>An optional <a>Script Event Type</a> used to identify the type of event (e.g. dialogue, on screen text) in <a>Dubbing Scripts</a>.</li>
            <li>Zero or more <a>Character Identifiers</a> indicating the <a>Characters</a> involved in this <a>Script Event</a>.
              <p class="note">While typically, a <a>Script Event</a> corresponds to one single <a>Character</a>, there are cases where multiple <a>characters</a> can be associated with a <a>Script Event</a>. This is when all <a>Characters</a> speak the same text at the same time.</p>
            </li>
            <li><p>Zero or more <a>Text</a> objects, each representing either the <a>Original</a> language <a>transcript</a> or
              <a>Translations</a> of the original language <a>script</a> in other languages.</p>
              <p class="note">Empty <a>Text</a> objects can be used to indicate explicitly that there is no text content.
                It is recommended that empty <a>Text</a> objects are not used as a workflow placeholder to indicate incomplete work.</p></li>
            <li>an optional <a>Script Event Description</a> property, as a human-readable description of the <a>Script Event</a>.</li>
            <li>an optional <a>On Screen</a> property, which is an annotation indicating the position of the subject (e.g. a <a>character</a>) of the <a>Script Event</a></li>
            <li>Zero or more <a>Mixing Instruction</a> objects used to adjust playback of the programme audio during the <a>Script Event</a>.</li>
          </ul>
        </p>

        <p>A <a>Script Event</a> is represented in TTML with the following structure and constraints:
          <ul>There MUST be one <code>div</code> element, with the following constraints:
            <ul>
              <li>The <code>xml:id</code> attribute MUST be present containing the <a>Script Event Identifier</a>.</li>
              <li>
                <p>The <code>begin</code>, <code>end</code> and <code>dur</code> attributes represent respectively the <a>Begin</a>, <a>End</a> and <a>Duration</a> of the <a>Script Event</a>.</p>
                <p>The <code>begin</code> and <code>end</code> attributes SHOULD be present.
                  The <code>dur</code> attribute MAY be present.</p>
                <p class="note">As noted in [[?ttml2]] if both an <code>end</code> attribute and a <code>dur</code> attribute are present,
                  the end time is the earlier of <code>end</code> and <code>(begin&nbsp;+&nbsp;dur)</code>.</p>
                <div class="note">If timing attributes are omitted, the following rules apply:
                  <ul>
                    <li>The default value for <code>begin</code> is zero, i.e. the same as the begin time of the parent element.</li>
                    <li>The default value for <code>end</code> is indefinite,
                      i.e. it resolves to the same as the end time of the parent timed element,
                      if there is one.
                      The topmost timed element is the <code>&lt;body&gt;</code> element,
                      whose end time is for practical purposes the end of the <a>Related Media Object</a>.</li>
                    <li>The default value for <code>dur</code> is indefinite, i.e. the end time resolves to the same as the end time of the parent element.</li>
                  </ul>
                </div>
              </li>
              <li>The <code>ttm:agent</code> attribute MAY be present and if present,
                MUST contain a reference to each <code>ttm:agent</code> that represents an associated <a>Character</a>.
              <aside class="note">Multiple references are specified using a space-separated list.</aside></li>
          <pre class="example">
...
&lt;div xml:id=&quot;event_1&quot;
     begin=&quot;9663f&quot; end=&quot;9682f&quot; 
     ttm:agent=&quot;character_4&quot;&gt;
...
&lt;/div&gt;
...
          </pre>
              <li>It MAY contain zero or more <code>p</code> elements representing each <a>Text</a> object.</li>
              <li>The <code>style</code> attribute MAY be present. If present, it MAY contain a reference to the <code>&lt;style&gt;</code> defining the <a>Character Style</a>. Additional style references or inline styles MAY be used.</li>
              <li>It MAY contain a <code>metadata</code> element representing the <a>On Screen</a> property.</li>
            </ul>
          </ul>
        </p>
        </section>

        <section id="text">
          <h4>Text</h4>
          <p>The <dfn>Text</dfn> object contains text content in a single language, and may be styled and associated with a <a>Character</a>.
            It indicates whether it is in the <a>Original</a> language or if it is a <a>Translation</a>, as well as its language.</p>
          <p>
            The language for which a dubbing or audio description <a>script</a> is being prepared is called the <dfn>Target Recording Language</dfn>.
            <aside class="note">In some workflows a translation <a>script</a> is prepared in an intermediate, or pivot,
              language prior to translation into the Target Recording Language.</aside>
          </p>
          <p>Zero or more <a>Mixing Instruction</a> objects used to modify the programme audio during the <a>Text</a> MAY be present.
          </p>
          <p class="issue" data-number="15"></p>
          <p>A <a>Text</a> object is represented with a <code>p</code> element with the following constraints:</p>
            <ul>
              <li>The text content of the <code>&lt;p&gt;</code> is the <a>Text</a> of the <a>Script Event</a>.
                <aside class="note">The text content of the paragraph can be structured using TTML elements such as
                  <code>&lt;br&gt;</code> or <code>&lt;span&gt;</code>
                  which can include or reference TTML style attributes
                  such as <code>tts:ruby</code> used to alter the layout or styling of
                  sections of text within each paragraph.
                  Similarly metadata can be added using attributes or <code>&lt;metadata&gt;</code> elements.</aside>
              </li>
              <li>The <code>style</code> attribute MAY be present.
                If present, it MAY contain a reference to the <code>&lt;style&gt;</code> that defines the relevant <a>Character Style</a>.
                Additional style references or inline styles MAY be used as defined in [[ttml2]],
                and MAY be applied to sub-sections of the text defined by <code>&lt;span&gt;</code> elements.</li>
              <li>The referenced or inline styles MAY include the
                <code>tta:speak</code> or
                <code>tta:pitch</code> attributes
                representing a <a>Synthesized Audio</a> object.
                <aside class="note">Synthesized audio styles may be applied to <code>&lt;span&gt;</code> elements
                  within the text content to vary the rate or pitch of specific sub-sections of the text.
                </aside>
              </li>
              <li>The <code>&lt;p&gt;</code> element MUST have one <a>Text Language Source</a> property.</li>
              <li>The <code>&lt;p&gt;</code> element SHOULD have an <code>xml:lang</code> attribute corresponding to the language of the <a>Text</a> object.
                <p class="note">If a <code>&lt;p&gt;</code> element omits the <code>xml:lang</code> attribute then its computed language
                is derived by inheritance from its parent element, and so forth up to the root <code>&lt;tt&gt;</code> element,
                which is required to set the <a>Primary Language</a> via its <code>xml:lang</code> attribute.
                Care should be taken if changing the <a>Primary Language</a> of a <a>Document Instance</a> in case
                doing so affects descendant elements unexpectedly.
                Authors can mitigate this risk by explicitly setting <code>xml:lang</code> on all <code>&lt;p&gt;</code> elements.</p>
                <p class="note">Within a <code>&lt;div&gt;</code> representing a <a>Script Event</a>
                  the order of <code>&lt;p&gt;</code> children is significant.</p>
                <pre class="example">
&lt;div xml:id=&quot;event_3&quot;
     begin=&quot;9663f&quot; end=&quot;9682f&quot; 
     style=&quot;style_a&quot;
     ttm:agent=&quot;character_3&quot;&gt;
  &lt;p xml:lang=&quot;pt-BR&quot; daptm:langSrc=&quot;original&quot; &gt;Voc&#xea; vai ter.&lt;/p&gt;
  &lt;p xml:lang=&quot;fr&quot; daptm:langSrc=&quot;translation&quot; &gt;Bah, il arrive.&lt;/p&gt;
&lt;/div&gt;
                </pre>
              </li>
              <li>It MAY contain zero or more <code>&lt;audio&gt;</code> elements representing each <a>Audio Recording</a> object.</li>
              <li>It MAY contain zero or more <code>&lt;animate&gt;</code> elements representing each <a>Mixing Instruction</a> object.</li>
            </ul>

        </section>

        <section id="text-language-source">
          <h4>Text Language Source</h4>
          <p>The <dfn>Text Language Source</dfn> property is an annotation indicating whether a <a>Text</a> object is
            in the same language as the relevant part of the audio's
            language (original), or if it is a representation in another language (translation):</p>
          <ul>
            <li><dfn>Original</dfn> - the <a>Text</a> is any of:
              <ol>
                <li>the same language as the dialogue that it represents in the original programme audio;</li>
                <li>a transcription of text visible in the original programme video, in the same language as that text;</li>
                <li>representative of non-dialogue sound and is in the <a>Primary Language</a> of the <a>Document Instance</a>;</li>
                <li>representative of the scene in the original programme video, and is in the <a>Primary Language</a> of the <a>Document Instance</a>.</li>
              </ol>
            </li>
            <li><dfn>Translation</dfn> - the <a>Text</a> is a representation of the Original language text in a different language.</li>
          </ul>
          <aside class="note">The language of a <a>Text</a> object whose <a>Text Language Source</a> is <a>Original</a>
            can be different to the document's <a>Primary Language</a>.
            For example a <a>transcript</a> of a short piece of dialogue spoken in a different language to the majority of the dialogue would be annotated
            with both a different <code>xml:lang</code> value and as being <a>Original</a>.</aside>
          <p>The <a>Text Language Source</a> property is represented as a <code>daptm:langSrc</code> attribute with the following constraints:</p>
          <p class="ednote">Should we use an abbreviated attribute name?</p>
          <p class="ednote">Initial design is to use an abbreviated name and <code>original|translation</code>,
            though I considered using an abbreviated value too, since this attribute will appear on every <code>&lt;p&gt;</code> element.
            Abbreviating O for Original is probably a bad idea because the letter O and the number 0 can easily be confused.
            I also considered P for Primary but that caused potential confusion between Primary Language and Primary Text Language Source.</p>
          <div class="exampleInner">
            <pre class="language-abnf">
daptm:langSrc
  : "original"
  | "translation"
            </pre>
          </div>
        </section>

        <section id="on-screen">
          <h4>On Screen</h4>
          <p>The <dfn>On Screen</dfn> property is an annotation indicating
            the position in the scene relating to the subject of a <a>Script Event</a>,
            for example of the <a>character</a> speaking:</p>
          <ul>
            <li>ON - the <a>Script Event</a>'s subject is on screen for the entire duration</li>
            <li>OFF - the <a>Script Event</a>'s subject is off screen for the entire duration</li>
            <li>ON_OFF - the <a>Script Event</a>'s subject starts on screen, but goes off screen at some point</li>
            <li>OFF_ON - the <a>Script Event</a>'s subject starts off screen, but goes on screen at some point</li>
          </ul>
          <p>If omitted, the default value is "ON".</p>
          <aside class="note">In <a>Audio Description Scripts</a> the subject of each
            <a>Script Event</a>, i.e. what is being described,
            is expected to be in the video image, therefore the default of "ON" allows
            the property to be omitted in those cases without distortion of meaning.</aside>
          <p>The <a>On Screen</a> property is represented in TTML as a
            <dfn><code>daptm:onScreen</code></dfn> attribute on the
            <code>&lt;div&gt;</code> element, with the following constraints:
            <ul>
              <li>The following attribute corresponding to the <a>On Screen</a> <a>Script Event</a> property may be present:
                <div class="exampleInner">
                  <pre class="language-abnf">
daptm:onScreen
  : "ON"     # default
  | "OFF"
  | "ON_OFF"
  | "OFF_ON"
                  </pre>
                </div>
              </li>
            </ul>
          </p>
        </section>
        <section id="script-event-description">
          <h4>Script Event Description</h4>
          <p>The <dfn>Script Event Description</dfn> property is an annotation providing a human-readable description of a <a>Script Event</a>.</p>
          <p>The <a>Script Event Description</a> property is represented in TTML as a <code>&lt;ttm:desc&gt;</code> element at the <code>&lt;div&gt;</code> level.</p>
          <p class="note">The <a>Script Event Description</a> does not need to be unique, i.e. it does not need to have a different value for each <a>Script Event</a>. 
            For example a particular value could be re-used to identify in a human-readable way one or more <a>Script Events</a> that are intended to be processed together,
            e.g. in a batch recording.</p>
        <pre class="example"
          data-include="examples/event-desc.xml"
          data-include-format="text">
        </pre>
          <p>The <code>&lt;ttm:desc&gt;</code> element MAY have a <code>daptm:descType</code> attribute specified to indicate the type of description. The <code>daptm:descType</code> attribute is defined below. Its possible values are as indicated in the registry at YYY.</p>
          <p class="ednote">Registry to be defined.</p>
          <div class="exampleInner">
            <pre class="language-abnf">
daptm:descType : string
            </pre>
          </div>
          <pre class="example"
            data-include="examples/event-desc-descType.xml"
            data-include-format="text">
          </pre>
          <p>Multiple <code>&lt;ttm:desc&gt;</code> elements MAY be present with different values of <code>daptm:descType</code>, as in the following example.</p>
          <pre class="example"
            data-include="examples/event-desc-multiple-descType.xml"
            data-include-format="text">
          </pre>
        </section>
        <section id="script-event-type">
          <h4>Script Event Type</h4>
          <p>The <dfn>Script Event Type</dfn> property provides one or more space-separated keywords representing the type of the <a>Script Event</a>,
            i.e. spoken text, or on-screen text,
            and in the latter case, the type of on-screen text (title, credit, location, ...).
            The possible keywords are indicated in the registry at XXXX.</p>
          <p class="ednote">Registry to be defined.</p>
          <p>The <a>Script Event Type</a> is represented in TTML by the following attribute:
            <div class="exampleInner">
              <pre class="language-abnf">
daptm:eventType : string
              </pre>
            </div>
            <pre class="example">
...
&lt;div xml:id=&quot;event_1&quot;
     begin=&quot;9663f&quot; end=&quot;9682f&quot; 
     ttm:agent=&quot;character_4&quot;&gt;
     daptm:eventType=&quot;dialogue&quot;
...
&lt;/div&gt;
...
            </pre>
          </p>
        </section>
      <section id="audio">
        <h3>Audio</h3>
        <p>An <dfn>Audio</dfn> object is used to specify an audio rendering of a <a>Text</a>.
          The audio rendering can either be a recorded audio resource,
          as an <a>Audio Recording</a> object,
          or a directive to synthesize a rendering of the text via a text to speech engine,
          which is a <a>Synthesized Audio</a> object.
          Both are types of <a>Audio</a> object.
        </p>
        <p>It is an error for an <a>Audio</a> not to be in the same language as its <a>Text</a>.</p>
        <p>A <a>presentation processor</a> that supports audio plays or inserts the <a>Audio</a>
          at the specified time on the <a>related media object</a>'s timeline.</p>
        <p class="note">The <a>Audio</a> object is "abstract": it only can exist as
          one of its sub-types, <a>Audio Recording</a> or <a>Synthesized Audio</a>.</p>
        <section id="audio-recording">
          <h4>Audio Recording</h4>
          <p>An <dfn>Audio Recording</dfn> is an <a>Audio</a> object that references an audio resource.
            It has the following properties:
          </p>
          <ul>
            <li>One or more alternative <dfn data-lt="Source|Sources">Sources</dfn>, each of which is either
              1) a link to an external audio resource
              or 2) an embedded audio recording;</li>
            <li>For each <a>Source</a>, one mandatory <dfn>Type</dfn>
              that specifies the type ([[MIME-TYPES]]) of the audio resource,
              for example <code>audio/basic</code>;</li>
            <li>An optional <a>Begin</a> property and an optional <a>End</a> and an optional <a>Duration</a> property
              that together define the <a>Audio Recording</a>'s time interval in the programme timeline,
              in relation to the parent element's time interval;
            </li>
            <li>An optional <dfn>In Time</dfn> and an optional <dfn>Out Time</dfn> property
              that together define a temporal subsection of the audio resource;
              <p>The default <a>In Time</a> is the beginning of the audio resource.</p>
              <p>The default <a>Out Time</a> is the end of the audio resource.</p>
              <p>If the temporal subsection of the audio resource is longer than
                the duration of the <a>Audio Recording</a>'s time interval,
                then playback MUST be truncated to end when the
                <a>Audio Recording</a>'s time interval ends.
              </p>
              <aside class="note">
                "Extended descriptions" (known in [[media-accessibility-reqs]] as "Extended video descriptions")
                are longer than the allocated time within the related media.
                A <a>presentation processor</a> that supports extended descriptions
                can allow the effective play rate of the audio resource
                to differ from the play rate of the related media object
                so that the resulting interval has a long enough duration
                to accommodate the audio resource's temporal subsection.
                For example it could pause or slow down playback of
                the <a>related media object</a> while
                continuing playback of the audio resource,
                or it could speed up playback of the audio resource, so that
                the <a>Audio Recording</a>'s time interval does not end
                before the audio resource's temporal subsection.
                This behaviour is currently unspecified and therefore implementation-defined.
              </aside>
              <p>If the temporal subsection of the audio resource is shorter than
                the duration of the <a>Audio Recording</a>'s time interval,
                then the audio resource plays once.
              </p>
            </li>
            <li>Zero or more <a>Mixing Instructions</a> that modify the playback characteristics
               of the <a>Audio Recording</a>.</li>
          </ul>
          <p>When a list of <a>Sources</a> is provided,
            a <a>presentation processor</a> MUST play no more than one of the
            <a>Sources</a> for each <a>Audio Recording</a>.</p>
          <p>Implementations can use the <a>Type</a>, and if present,
            any relevant additional formatting information,
            to decide which <a>Source</a> to play.
            For example, given two <a>Sources</a>, one being a WAV file, and the other an MP3,
            an implementation that can play only one of those formats,
            or is configured to have a preference for one or the other,
            would select the playable or preferred version. 
          </p>
          <p>An <a>Audio Recording</a> is represented in TTML by an 
            <a href="https://www.w3.org/TR/ttml2/#embedded-content-vocabulary-audio"><code>&lt;audio&gt;</code></a>
            element child of a <code>&lt;p&gt;</code> or <code>&lt;span&gt;</code> element
            corresponding to the <a>Text</a> to which it applies.
            The following constraints apply to the <code>&lt;audio&gt;</code> element:</p>
          <ul>
            <li>The <code>begin</code>, <code>end</code> and <code>dur</code> attributes
              represent respectively the <a>Begin</a>, <a>End</a> and <a>Duration</a> properties;</li>
            <li>The <code>clipBegin</code> and <code>clipEnd</code> attributes
              represent respectively the <a>In Time</a> and <a>Out Time</a> properties,
              as illustrated by <a href="#example-5"></a>;</li>
            <li>For each <a>Source</a>, if it is a link to an external audio resource,
              the <a>Source</a> and <a>Type</a> properties are represented by exactly one of:
              <ol>
                <li>A <code>src</code> attribute that is not a fragment identifier,
                  and a <code>type</code> attribute respectively;
                  <p>This mechanism cannot be used if there is more than one <a>Source</a>.</p>
                  <pre class="example"
                    data-include="examples/audio-single-external-source.xml"
                    data-include-format="text">
                  </pre>
                </li>
                <li>A <a href="https://www.w3.org/TR/ttml2/#embedded-content-vocabulary-source"><code>&lt;source&gt;</code></a> child element with a
                  <code>src</code> attribute that is not a fragment identifier
                  and a <code>type</code> attribute respectively;
                  <pre class="example"
                    data-include="examples/audio-multiple-external-source.xml"
                    data-include-format="text">
                  </pre>
                </li>
              </ol>
              <p>A <code>src</code> attribute that is not a fragment identifier is a URL that references
                an external audio resource, i.e. one that is not embedded within the <a>DAPT Script</a>.
                No validation that the resource can be located is specified in DAPT.</p>
              <p class="ednote">Do we need both mechanisms here?
                It's not clear what semantic advantage the child <code>&lt;source&gt;</code> element carries in this case.
                Consider marking use of that child <code>&lt;source&gt;</code> element as "at risk"?</p>
              <p class="issue" data-number="113"></p>
            </li>
            <li>If the <a>Source</a> is an embedded audio resource,
              the <a>Source</a> and <a>Type</a> properties are represented together by exactly one of:
              <ol>
                <li>A <code>src</code> attribute that is a fragment identifier
                  that references either
                  an <a href="https://www.w3.org/TR/ttml2/#embedded-content-vocabulary-audio"><code>&lt;audio&gt;</code></a> element
                  or a <a href="https://www.w3.org/TR/ttml2/#embedded-content-vocabulary-data"><code>&lt;data&gt;</code></a> element,
                  where the referenced element is a
                  child of <code>/tt/head/resources</code>
                  and specifies a <code>type</code> attribute
                  and the <code>xml:id</code> attribute used to reference it;
                  <p>This mechanism cannot be used if there is more than one <a>Source</a>.</p>
                  <pre class="example"
                    data-include="examples/audio-single-embedded-referenced-source.xml"
                    data-include-format="text">
                  </pre>
                </li>
                <li>A <a href="https://www.w3.org/TR/ttml2/#embedded-content-vocabulary-source"><code>&lt;source&gt;</code></a> child element with a
                  <code>src</code> attribute that is a fragment identifier
                  that references either
                  an <code>&lt;audio&gt;</code> element
                  or a <a href="https://www.w3.org/TR/ttml2/#embedded-content-vocabulary-data"><code>&lt;data&gt;</code></a> element,
                  where the referenced element is a
                  child of <code>/tt/head/resources</code>
                  and specifies a <code>type</code> attribute
                  and the <code>xml:id</code> attribute used to reference it;
                  <pre class="example"
                    data-include="examples/audio-multiple-embedded-referenced-source.xml"
                    data-include-format="text">
                  </pre>
                </li>
                <li>A <a href="https://www.w3.org/TR/ttml2/#embedded-content-vocabulary-source"><code>&lt;source&gt;</code></a> child element with a 
                  <a href="https://www.w3.org/TR/ttml2/#embedded-content-vocabulary-data"><code>&lt;data&gt;</code></a> element child
                  that specifies a <code>type</code> attribute and contains the audio recording data.
                  <pre class="example"
                    data-include="examples/audio-single-embedded-inline-source.xml"
                    data-include-format="text">
                  </pre>
                </li>
              </ol>
              <p>In each of the cases above the <code>type</code> attribute represents the <a>Type</a> property.</p>
              <p>A <code>src</code> attribute that is a fragment identifier is a pointer
                to an audio resource that is embedded within the <a>DAPT Script</a></p>
              <p>If <code>&lt;data&gt;</code> elements are defined, each one MUST contain
                either <code>#PCDATA</code> or
                <a href="https://www.w3.org/TR/ttml2/#embedded-content-vocabulary-chunk"><code>&lt;chunk&gt;</code></a> child elements
                and MUST NOT contain any <code>&lt;source&gt;</code> child elements.</p>
              <p><code>&lt;data&gt;</code> and <code>&lt;source&gt;</code> elements MAY contain a <code>format</code> attribute
                whose value implementations MAY use in addition to the <code>type</code> attribute value
                when selecting an appropriate audio resource.
              </p>
              <p class="ednote">Do we need all 3 mechanisms here?
                Do we need any?
                There may be a use case for embedding audio data,
                since it makes the single document a portable (though large)
                entity that can be exchanged and transferred with no concern for missing resources,
                and no need for e.g. manifest files.
                If we do not need to support referenced embedded audio then only the last option is needed,
                and is probably the simplest to implement.
                One case for referenced embedded audio is that it more easily allows reuse of the
                same audio in different document locations, though that seems like an unlikely
                requirement in this use case. Another is that it means that all embedded audio is in
                an easily located part of the document in <code>tt/head/resources</code>, which
                potentially could carry an implementation benefit?
                Consider marking the embedded data features as "at risk"?</p>
              <p class="issue" data-number="114"></p>
              <p class="issue" data-number="115"></p>
              <p class="issue" data-number="116"></p>
              <p class="issue" data-number="117"></p>
            </li>
            <li><a>Mixing Instructions</a> MAY be applied as specified in their
              <a href="#mixing-instruction-ttml">TTML representation</a>;</li>
            <li>The computed value of <code>xml:lang</code> MUST be identical
              to the computed value of <code>xml:lang</code> of the parent element
              and any child <code>&lt;source&gt;</code> elements
              and any referenced embedded <code>&lt;data&gt;</code> elements.</li>
          </ul>
        </section>
        <section id="synthesized-audio">
          <h4>Synthesized Audio</h4>
          <p>A <dfn>Synthesized Audio</dfn> is an <a>Audio</a> object that represents
            a machine generated audio rendering of the parent <a>Text</a> content.
            It has the following properties:
          </p>
          <ul>
            <li>A mandatory <dfn>Rate</dfn> that specifies the rate of speech, being
              <code>normal</code>,
              <code>fast</code> or
              <code>slow</code>;</li>
            <li>An optional <dfn>Pitch</dfn> that allows adjustment of the pitch
              of the speech.</li>
          </ul>
          <p>A <a>Synthesized Audio</a> is represented in TTML by
            the application of a
            <a href="https://www.w3.org/TR/ttml2/#audio-style-attribute-speak"><code>tta:speak</code></a>
            style attribute on the element representing the <a>Text</a> object to be spoken,
            where the computed value of the attribute is
            <code>normal</code>, <code>fast</code> or <code>slow</code>.
            This attribute also represents the <a>Rate</a> Property.
          </p>
          <p>The <a href="https://www.w3.org/TR/ttml2/#audio-style-attribute-pitch"><code>tta:pitch</code></a>
            style attribute represents the <a>Pitch</a> property.</p>
          <p>The TTML representation of a <a>Synthesized Audio</a>
            is illustrated by <a href="#example-6"></a>.</p>
          <p class="note">A <code>tta:pitch</code> attribute on an element
            whose computed value of <code>tta:rate</code> is <code>none</code>
            has no effect.
            Such an element is not considered to have an associated <a>Synthesized Audio</a>.</p>
        </section>
      </section>
      <section id="mixing-instruction">
        <h3>Mixing Instruction</h3>
        <p>A <dfn>Mixing Instruction</dfn> object is a static or animated adjustment
          of the audio relating to the containing object.
          It has the following properties:</p>
        <ul>
          <li>Zero or more <dfn>Gain</dfn> properties.
            The gain acts as a multiplier to be applied to the related <a>Audio</a>;</li>
          <li>Zero or more <dfn>Pan</dfn> properties.
            The pan adjusts the stereoscopic (left/right) position;</li>
          <li>An optional <a>Begin</a> and an optional <a>End</a> and an optional <a>Duration</a> property
            that together define the time interval during which the <a>Mixing Instruction</a>
            applies;</li>
          <li>An optional <dfn>Fill</dfn> property that specifies whether,
            at the end time of an animated <a>Mixing Instruction</a>,
            the specified <a>Gain</a> and <a>Pan</a> properties should be
            retained (<code>freeze</code>) or reverted (<code>remove</code>).</li>
        </ul>
        <p id="mixing-instruction-ttml">A <a>Mixing Instruction</a> is represented by applying audio style attributes
          to the element that corresponds to the relevant object, either inline,
          by reference to a <code>&lt;style&gt;</code> element, or in a child (inline)
          <code>&lt;animate&gt;</code> element:</p>
        <ul>
          <li>The <a href="https://www.w3.org/TR/ttml2/#audio-style-attribute-gain"><code>tta:gain</code></a>
            attribute represents the <a>Gain</a> property;</li>
          <li>The <a href="https://www.w3.org/TR/ttml2/#audio-style-attribute-pan"><code>tta:pan</code></a>
            attribute represents the <a>Pan</a> property.</li>
        </ul>
        <p>If the <a>Mixing Instruction</a> is animated, that is,
          if the adjustment properties change during the
          containing object's active time interval, then it is represented using
          one or more child <a href="https://www.w3.org/TR/ttml2/#animation-vocabulary-animate"><code>&lt;animate&gt;</code></a> elements.
          This representation is required if more than one <a>Gain</a> or <a>Pan</a> property is needed,
          or if any <a>timing properties</a> are needed.</p>
        <p>The <a href="https://www.w3.org/TR/ttml2/#animation-vocabulary-animate"><code>&lt;animate&gt;</code></a>
           element(s) MUST be children of
          the element corresponding to the containing object,
          and have the following constraints:</p>
        <ul>
          <li>The <code>begin</code>, <code>end</code> and <code>dur</code> attributes
            represent respectively the <a>Begin</a>, <a>End</a> and <a>Duration</a> properties;</li>
          <li>The <code>fill</code> attribute represents the <a>Fill</a> property;</li>
          <li>The <a href="https://www.w3.org/TR/ttml2/#audio-style-attribute-gain"><code>tta:gain</code></a>
            attribute represents the <a>Gain</a> property,
            and uses the <a href="https://www.w3.org/TR/ttml2/#animation-value-animation-value-list"><code>animation-value-list</code></a>
            syntax to express the list of values to be applied during the animation period;</li>
          <li>The <a href="https://www.w3.org/TR/ttml2/#audio-style-attribute-pan"><code>tta:pan</code></a>
            attribute represents the <a>Pan</a> property,
            and uses the <a href="https://www.w3.org/TR/ttml2/#animation-value-animation-value-list"><code>animation-value-list</code></a>
            syntax to express the list of values to be applied during the animation period.</li>
        </ul>
        <p>The TTML representation of animated <a>Mixing Instructions</a> is
          illustrated by <a href="#example-4"></a>.</p>
        <p>See also <a href="#audio-mixing"></a>.</p>
      </section>
    </section> <!-- #data-model -->

    <section id="profile-constraints">
      <h2>Constraints</h2>
      <section id="Document Encoding">
        <h3>Document Encoding</h3>
        <p>A <a>Document Instance</a> MUST be serialised as a well-formed XML 1.0 [[!xml]] document
          encoded using the UTF-8 character encoding as specified in [[UNICODE]].</p>
    
          <p>The resulting [[!xml]] document MUST NOT contain any of the following physical structures:</p>
    
          <ul>
            <li><em>entity declarations</em>; and</li>
    
            <li><em>entity references</em> other than to <em>predefined entities</em>.</li>
          </ul>
    
          <div class="note">
            <p>The resulting [[xml]] document can contain
            <dfn data-cite="xml#dt-charref">character references</dfn>,
            and <dfn data-cite="xml#dt-entref">entity references</dfn> to
            <dfn data-cite="xml#sec-predefined-ent">predefined entities</dfn>.</p>
            <p>The predefined entities are (including the leading ampersand and trailing semicolon):</p>
            <ul>
              <li><code>&amp;amp;</code> for an ampersand &amp;</li>
              <li><code>&amp;apos;</code> for an apostrophe &apos;</li>
              <li><code>&amp;gt;</code> for a greater than sign &gt;</li>
              <li><code>&amp;lt;</code> for a less than sign &lt;</li>
              <li><code>&amp;quot;</code> for a quote symbol &quot;</li>
            </ul>
          </div>

          <p class="note">A <a>Document Instance</a> can also be used as an in-memory model
            for processing, in which case the serialisation requirements do not apply.</p>
      </section>
      <section id="foreign-elements-and-attributes">
        <h3>Foreign Elements and Attributes</h3>
        <p>
          A <a>Document Instance</a> MAY contain elements and attributes that are neither specifically permitted nor forbidden by a profile.
        </p>
        <p class ="note">
          <a>Document Instances</a> remain subject to the content conformance requirements specified at Section 3.1 of [[ttml2]].
          In particular, a Document Instance can contain elements and attributes not in any TT namespace, i.e. in foreign namespaces, since such elements and attributes are pruned by the algorithm at Section 4 of [[ttml2]] prior to evaluating content conformance.
        </p>
        <p class ="note">
          For validation purposes it is good practice to define and use a content specification for all foreign namespace elements and attributes used within a <a>Document Instance</a>.
        </p>
        <p>
          A <a>transformation processor</a> SHOULD preserve such elements or attributes whenever possible.
        </p>
        <p class="ednote">Do we need to say that a <a>presentation processor</a> may ignore foreign vocab?</p>

        <section>
          <h4>Proprietary Metadata</h4>
          <p>Many dubbing and <a>audio description</a> workflows permit annotation of <a>Script Events</a> or documents with proprietary metadata.
            Metadata vocabulary defined in this specification or in [[ttml2]] MAY be included.
            Additional vocabulary in other namespaces MAY also be included.</p>
          <p class="note">It is possible to add information such as the title of the programme using [[ttml2]] constructs.</p>
          <pre class="example"
            data-include="examples/metadata-ttml2.xml"
            data-include-format="text">
          </pre>
          <p class="note">It is possible to add workflow-specific information using a foreign namespace.
            In the following example, a fictitious namespace <code>vendorm</code> from an "example vendor" is used
            to provide document-level information not defined by DAPT.</p>
          <pre class="example"
            data-include="examples/metadata-proprietary.xml"
            data-include-format="text">
          </pre>
        </section> <!-- Proprietary Metadata -->
  
      </section>
      <section id="namespaces">
        <h3>Namespaces</h3>
        <p>
          The following namespaces (see [[xml-names]]) are used in this specification:
        </p>
        <table class="simple">
          <thead>
            <tr>
              <th>Name</th>
              <th>Prefix</th>
              <th>Value</th>
              <th>Defining Specification</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>XML</td>
              <td><code>xml</code></td>
              <td><code>http://www.w3.org/XML/1998/namespace</code></td>
              <td>[[xml-names]]</td>
            </tr>
            <tr>
              <td>TT</td>
              <td><code>tt</code></td>
              <td><code>http://www.w3.org/ns/ttml</code></td>
              <td>[[ttml2]]</td>
            </tr>
            <tr>
              <td>TT Parameter</td>
              <td><code>ttp</code></td>
              <td><code>http://www.w3.org/ns/ttml#parameter</code></td>
              <td>[[ttml2]]</td>
            </tr>
            <tr>
              <td>TT Feature</td>
              <td><em>none</em></td>
              <td><code>http://www.w3.org/ns/ttml/feature/</code></td>
              <td>[[ttml2]]</td>
            </tr>
            <tr>
              <td>TT Audio Style</td>
              <td><em>tta:</em></td>
              <td><code>http://www.w3.org/ns/ttml#audio</code></td>
              <td>[[ttml2]]</td>
            </tr>
            <tr>
              <td>DAPT Metadata</td>
              <td><code>daptm</code></td>
              <td><code>http://www.w3.org/ns/ttml/profile/dapt#metadata</code></td>
              <td><em>This specification</em></td>
            </tr>
            <tr>
              <td><dfn>DAPT Extension</dfn></td>
              <td><em>none</em></td>
              <td><code>http://www.w3.org/ns/ttml/profile/dapt/extension</code></td>
              <td><em>This specification</em></td>
            </tr>
          </tbody>
        </table>
        <p>
          The namespace prefix values defined above are for convenience and <a>Document Instances</a> MAY use any prefix value that conforms to [[xml-names]].
        </p>
        <p>
          The namespaces defined by this proposal document are mutable [[namespaceState]]; all undefined names in these namespaces are reserved for future standardization by the W3C.
        </p>
      </section>
      <section id="related-media-object-section">
        <h3>Related Media Object (TTML)</h3>
        <p>Within DAPT, the common language terms audio and video are used in the context of a programme.
          The audio and video are each a part of what is defined in [[ttml2]] as the
          <dfn data-cite="ttml2#terms-related-media-object">Related Media Object</dfn> that
          provides the media timeline and is the source of the <a>main programme audio</a>,
          and any visual timing references needed when adjusting timings relevant to the video image,
          such as for lip synchronization.</p>
      </section>
      <section id="synchronization-section">
        <h3>Synchronization</h3>
        <p>
          If the <a>Document Instance</a> is intended to be used as the basis for producing
          an [[ttml-imsc1.2]] document,
          the synchronization provisions of [[ttml-imsc1.2]] apply
          in relation to the video.
        </p>
        <p>Timed content within the <a>Document Instance</a> is intended to be rendered
          starting and ending on specific audio samples.</p>
        <p class="note">In the context of this specification rendering could be visual presentation of text,
          for example to show an actor what words to speak, or could be audible playback of an audio resource,
          or could be physical or haptic, such as a Braille display.
        </p>
        <p>In constrained applications, such as real-time audio mixing and playback,
          if accurate synchronization to the audio sample cannot be achieved in the rendered output,
          the combined effects of authoring and playback inaccuracies in
          timed changes in presentation SHOULD meet the synchronization requirements
          of [[EBU-R37]], i.e. audio changes are not to precede image changes by
          more than 40ms, and are not to follow them by more than 60ms.</p>
        <p>Likewise, authoring applications SHOULD allow authors to meet the
          requirements of [[EBU-R37]] by defining times with an accuracy
          such that changes to audio are less than 15ms after any associated change in
          the video image, and less than 5ms before any associated change in the video image.  
        </p>
        <p>Taken together, the above two constraints on overall presentation and
          on <a>DAPT documents</a> intended for real-time playback mean that
          <a>content processors</a> SHOULD complete audio presentation changes
          no more than 35ms before the time specified in the <a>DAPT document</a>
          and no more than 45ms after the time specified.</p>
      </section>
      <section id="profile-signaling-section">
        <h3>Profile Signaling</h3>
        This section defines how a <a>Document Instance</a> signals that it is a <em>DAPT</em> <a>Document Instance</a>
        and how it signals any processing requirements that apply.
        See also <a href="#content-profile-conformance-section"></a>, which defines how to
        establish that a DAPT <a>Document Instance</a> conforms to this specification.

        <section id="profile-designator">
          <h4>Profile Designator</h4>
          <p>This profile is associated with the following profile designators:</p>
          <table class="simple">
            <thead>
              <tr>
                <th>Profile Name</th>
    
                <th>Profile Designator</th>
              </tr>
            </thead>
    
            <tbody>
              <tr>
                <td><dfn data-dfn-type="dfn" id="dfn-dapt-1-0-content-profile">DAPT 1.0 Content Profile</dfn></td>
                <td><code>http://www.w3.org/ns/dapt/profile/content</code></td>
              </tr>
              <tr>
                <td><dfn data-dfn-type="dfn" id="dfn-dapt-1-0-processor-profile">DAPT 1.0 Processor Profile</dfn></td>
                <td><code>http://www.w3.org/ns/dapt/profile/processor</code></td>
              </tr>
            </tbody>
          </table>
        </section> <!-- profile-designator -->

        <section id="content-profiles">
          <h4><code>ttp:contentProfiles</code></h4>
          <p>The <dfn data-cite="ttml2#profile-attribute-contentProfiles"><code>ttp:contentProfiles</code></dfn> attribute
            is used to declare the [[ttml2]] profiles to which the document conforms.</p>
          <p>TTML documents representing DAPT Scripts MUST specify a <a><code>ttp:contentProfiles</code></a> attribute
            on the <code>&lt;tt&gt;</code> element including one value equal to the
            <a>DAPT 1.0 Content Profile</a> designator.
            Other values MAY be present to declare conformance to other profiles of [[ttml2]],
            and MAY include profile designators in proprietary namespaces.</p>
        </section>

        <section id="ttp-profile">
          <h4><code>ttp:profile</code></h4>
          <p>The <dfn data-cite="ttml2#parameter-attribute-profile"><code>ttp:profile</code></dfn> attribute
            is a mechanism within [[?TTML1]] for declaring the processing requirements for a <a>Document Instance</a>.
            It has effectively been superceded in [[ttml2]] by <a><code>ttp:processorProfiles</code></a>.</p>
          <p>TTML documents representing DAPT Scripts MUST NOT specify a <code>ttp:profile</code> attribute
            on the <code>&lt;tt&gt;</code> element.</p>
        </section>

        <section id="processor-profiles">
          <h4><code>ttp:processorProfiles</code></h4>
          <p>The <dfn data-cite="ttml2#profile-attribute-processorProfiles"><code>ttp:processorProfiles</code></dfn> attribute
            is used to declare the processing requirements for a <a>Document Instance</a>.</p>
          <p>TTML documents representing DAPT Scripts MAY specify a <a><code>ttp:processorProfiles</code></a> attribute
            on the <code>&lt;tt&gt;</code> element.
            If present, the <a><code>ttp:processorProfiles</code></a> attribute MUST include one value equal to
            the designator of the <a>DAPT 1.0 Processor Profile</a>.
            Other values MAY be present to declare additional processing constraints, 
            and MAY include profile designators in proprietary namespaces.</p>
          <p class="note"><a><code>ttp:processorProfiles</code></a> can be used
            to signal that features and extensions in additional profiles
            need to be supported to process the <a>Document Instance</a> successfully.
            For example, a local workflow might introduce particular metadata requirements,
            and signal that the processor needs to support those by using an additional
            processor profile designator.</p>
          <p class="note">If the content author does not need to signal that
            additional processor requirements than those defined by DAPT
            are needed to process the <a>DAPT document</a> then the
            <a><code>ttp:processorProfiles</code></a> is not expected to be present.</p>
        </section>

        <section id="ttml2-profile-attr-vocab">
          <h4>Other TTML2 Profile Vocabulary</h4>
          <p>[[ttml2]] specifies a vocabulary and semantics that can be used to define the set of features
            that a <a>document instance</a> can make use of, or that a processor needs to support,
            known as a <a href="https://www.w3.org/TR/ttml2/#profile">Profile</a>.</p>
          <p>Except where specified, it is not a requirement of DAPT that this profile vocabulary is supported by
            processors; nevertheless such support is permitted.</p>
          <p>The majority of this profile vocabulary is used to indicate how a processor can compute the set of features
            that it needs to support in order to process the <a>Document Instance</a> successfully.
            The vocabulary is itself defined in terms of TTML2 features.
            Those profile-related features are listed within <a href="#profiles-section"></a> as being optional. 
            They MAY be implemented in processors
            and their associated vocabulary
            MAY be present in <a>Document Instances</a>.
          </p>
          <p class="note">Unless processor support for these features and vocabulary has been
            arranged (using an out-of-band protocol), the vocabulary is not expected to be present.</p>
          <p>The additional profile-related vocabulary for which processor support is
            not required (but is permitted) in DAPT is:</p>
          <ul>
            <li>the <a href="https://www.w3.org/TR/ttml2/#profile-vocabulary-profile"><code>&lt;ttp:profile&gt;</code></a> element;</li>
            <li>the <a href="https://www.w3.org/TR/ttml2/#profile-vocabulary-feature"><code>&lt;ttp:feature&gt;</code></a>
              and <a href="https://www.w3.org/TR/ttml2/#profile-vocabulary-extension"><code>&lt;ttp:extension&gt;</code></a> elements;</li>
            <li>the <a href="https://www.w3.org/TR/ttml2/#profile-attribute-permitFeatureNarrowing"><code>ttp:permitFeatureNarrowing</code></a> attribute;</li>
            <li>the <a href="https://www.w3.org/TR/ttml2/#profile-attribute-permitFeatureWidening"><code>ttp:permitFeatureWidening</code></a> attribute;</li>
            <li>the <a href="https://www.w3.org/TR/ttml2/#profile-attribute-contentProfileCombination"><code>ttp:contentProfileCombination</code></a> attribute;</li>
            <li>the <a href="https://www.w3.org/TR/ttml2/#profile-attribute-inferProcessorProfileSource"><code>ttp:inferProcessorProfileSource</code></a> attribute;</li>
            <li>the <a href="https://www.w3.org/TR/ttml2/#profile-attribute-processorProfileCombination"><code>ttp:processorProfileCombination</code></a> attribute.</li>
          </ul>
        </section>

      </section>
      <section id="time-constraints-section">
        <h3>Timing constraints</h3>
        <p>Within a DAPT Script, the following constraints apply in relation to time attributes and time expressions:</p>
        <section id="timebase-section">
          <h4><code>ttp:timeBase</code></h4>
          <p>The only permitted <code>ttp:timeBase</code> value is <code>media</code>,
            since <a href="#profiles-section"></a> prohibits all timeBase features
            other than <a href="https://www.w3.org/TR/ttml2/#feature-timeBase-media"><code>#timeBase-media</code></a>.</p>
          <p>This means that the beginning of the document timeline,
            i.e. time "zero",
             is the beginning of the <a>Related Media Object</a>.</p>
        </section> <!-- timebase-section -->
        <section id="timecontainer-section">
          <h4><code>timeContainer</code></h4>
          <p>The only permitted value of the <code>timeContainer</code> attribute is the default value, <code>par</code>.</p>
          <p>Documents SHOULD omit the <code>timeContainer</code> attribute on all elements.</p>
          <p>Documents MUST NOT set the <code>timeContainer</code> attribute to any value other than <code>par</code> on any element.</p>
          <p class="note">This means that the <code>begin</code> attribute value for every timed element is relative to
            the computed begin time of its parent element,
            or for the <code>&lt;body&gt;</code> element, to time zero.</p>
        </section> <!-- timecontainer-section -->
        <section id="framerate-section">
          <h4><code>ttp:frameRate</code></h4>
          <p>If the document contains any time expression that uses the <code>f</code> metric,
            or any time expression that contains a frames component,
            the <code>ttp:frameRate</code> attribute MUST be present on the <code>&lt;tt&gt;</code> element.</p>
        </section> <!-- framerate-section -->
        <section id="tickrate-section">
          <h4><code>ttp:tickRate</code></h4>
          <p>If the document contains any time expression that uses the <code>t</code> metric,
            the <code>ttp:tickRate</code> attribute MUST be present on the <code>&lt;tt&gt;</code> element.</p>
        </section>
        <section id="time-clock-with-frames-section" class="informative">
          <h4><code>#time-clock-with-frames</code></h4>
          <p>As specified in [[?ttml2]], a <code>#time-clock-with-frames</code> expression is translated to
            a media time <code>M</code> according to
            <br/>
            <code>M = 3600 · hours + 60 · minutes + seconds + (frames ÷ (ttp:frameRateMultiplier · ttp:frameRate))</code>.</p>
          <div class="example note">
            <p>For example, the expression <code>01:23:45:15</code>,
            where <code>ttp:frameRate=&quot;25&quot;</code> and <code>ttp:frameRateMultiplier</code> is unspecified,
            and therefore the default of 1, is equivalent to a media time</p>
            <pre>
M = 3600 × 01 + 60 × 23 + 45 + (15 ÷ (1 × 25))
  = 5025.6s</pre>
            </div>
        </section> <!-- time-clock-with-frames-section -->
        <section id="time-expression-section">
          <h4>Time expressions</h4>
          <p>All time expressions within a document SHOULD use the same syntax,
            either <code>clock-time</code> or <code>offset-time</code>
            as defined in [[ttml2]].</p>
          <div class="example note">
            <p>A <code>clock-time</code> has one of the forms:</p>
            <ul>
              <li><code>hh:mm:ss.sss</code></li>
              <li><code>hh:mm:ss</code></li>
              <li><code>hh:mm:ss:ff</code></li>
              <li><code>hh:mm:ss:ff.x</code></li>
            </ul>
             <p>
              where
              <code>hh</code> is hours,
              <code>mm</code> is minutes,
              <code>ss</code> is seconds,
              <code>ss.sss</code> is seconds with a decimal fraction of seconds (any precision),
              <code>ff</code> is frames, and
              <code>x</code> is sub-frames.
            </p>
          </div>
          <div class="example note">
            <p>An <code>offset-time</code> has one of the forms:</p>
            <ul>
              <li><code>nn metric</code></li>
              <li><code>nn.nn metric</code></li>
            </ul>
            <p>
              where
              <code>nn</code> is an integer,
              <code>nn.nn</code> is a number with a decimal fraction (any precision), and
              <code>metric</code> is one of:
            </p>
            <ul>
              <li><code>h</code> for hours,</li>
              <li><code>m</code> for minutes,</li>
              <li><code>s</code> for seconds,</li>
              <li><code>ms</code> for milliseconds,</li>
              <li><code>f</code> for frames, and</li>
              <li><code>t</code> for ticks.</li>
            </ul>
          </div>
          <p>When mapping a media time expression M to a frame F of the video,
            e.g. for the purpose of accurately timing lip synchronization,
            the <a>content processor</a> SHOULD map M to the frame F with the presentation time
            that is the closest to, but not less, than M.</p>
          <p class="example">
            A media time expression of 00:00:05.1 corresponds to frame 
            <code>ceiling( 5.1 × ( 1000 / 1001 × 30) ) = 153</code>
            of a video that has a frame rate of <code>1000 / 1001 × 30 ≈ 29.97</code>.
          </p>
  
        </section> <!-- time-expression-section -->
      </section> <!-- time-constraints-section -->

      <section>
        <h4>Layout</h4>
        <p>This specification does not put additional constraints on the layout and rendering <a>Features</a> defined in [[!ttml-imsc1.2]].</p>
        <div class="note">Layout of the paragraphs may rely on the default TTML region (i.e. if no <code>layout</code> is used in the <code>head</code> element) or may be explicit by the use of the <code>region</code> attribute, if a <code>region</code> element is defined in a <code>layout</code> element in the <code>head</code> element.</div>
      </section>  <!-- Layout -->

    </section> <!-- Profile Constraints -->

  <section id="conformance">
    <p>[[ttml2]] specifies a formal language for expressing document and processor requirements,
      within the <a href="https://www.w3.org/TR/ttml2/#vocabulary-profiling">Profiling</a> sub-system.
      The normative requirements of this specification are defined using the conformance terminology
      described above, and are also defined using this TTML2 profile mechanism.
      Where TTML2 vocabulary is referenced, the syntactic and semantic requirements relating to that
      vocabulary as defined in [[ttml2]] apply.</p>
    <p>Whilst there is no requirement for a DAPT processor to implement the
      TTML2 profile processing semantics in general,
      implementers can use the TTML2 profiles defined in <a href="#profiles-section"></a>
      as a means of verifying that their implementations meet the normative requirements
      of DAPT, for example as a checklist.
    </p>
    <p>Conversely, a general purpose [[ttml2]] processor that does support the TTML2
      profile processing semantics can use the TTML2 profiles defined in <a href="#profiles-section"></a>
      directly to determine if it is capable of processing a <a>DAPT document</a>.
    </p>
    <section id="content-profile-conformance-section">
      <h3>Conformance of <a>DAPT Scripts</a></h3>
      <p>Conformant <a>DAPT Scripts</a> are [[ttml2]] <a>Document Instances</a> that
        conform to the normative provisions of this specification.
        Those provisions are expressed using the 
        <a href="https://www.w3.org/TR/ttml2/#profile">profile</a> vocabulary of [[ttml2]] in the
        <dfn data-cite="ttml2#terms-content-profile">content profile</dfn> defined
        in <a href="#profiles-section"></a>.</p>
    </section> <!-- content-profile-conformance-section -->
    <section id="processor-profile-conformance-section">
      <h3>Conformance of DAPT Processors</h3>
      <p>Conformant DAPT Processors are [[ttml2]]
        <dfn data-cite="ttml2#terms-content-processor">content processors</dfn> that
        conform to the normative provisions of this specification.
        Those provisions are expressed using the 
        <a href="https://www.w3.org/TR/ttml2/#profile">profile</a> vocabulary of [[ttml2]] in the
        <dfn data-cite="ttml2#terms-processor-profile">processor profile</dfn> defined
        in <a href="#profiles-section"></a>.</p>
    </section> <!-- processor-profile-conformance-section -->
  </section> <!-- conformance -->

  <section id="index" class="appendix">
    <!-- All the terms will magically appear here -->
  </section>

  <section id="audio-mixing" class="informative appendix">
    <h2>Audio Mixing</h2>

    <p>Applying the <a>Mixing Instructions</a> can be implemented using [[webaudio]].
      <a href="#audio-mixing-figure"></a> shows the flow of programme audio,
      and how, when audio-generating elements are active,
      the pan and gain (if set) on the <a>Script Event</a> are applied,
      then the output is passed to the <a>Text</a>,
      which mixes in the audio from any active <a>Audio Recording</a>,
      itself subject to its own <a>Mixing Instructions</a>,
      then the result has the <a>Text</a>'s <a>Mixing Instructions</a>
      applied, prior to the output being mixed on to the master bus.
    </p>

    <figure id="audio-mixing-figure">
      <div data-include="figures/audio-mixing.svg"></div>
      <figcaption>Example simple audio routing between objects</figcaption>
    </figure>

    <p>This example is shown as [[webaudio]] nodes in <a href="#webaudio-nodes-figure"></a>.</p>

    <figure id="webaudio-nodes-figure">
      <div data-include="figures/webaudio-nodes.svg"></div>
      <figcaption>Web audio nodes representing the audio processing needed.</figcaption>
    </figure>

    <p>The above examples are simplified in at least two ways:</p>
    <ul>
      <li>if a <a>Text</a> contains
        <code>&lt;span&gt;</code> elements that themselves have <a>Mixing Instructions</a>
        applied, then additional nodes would be needed;</li>
      <li>the application of <em>animated</em> <a>Mixing Instructions</a> is not
        shown explicitly. [[webaudio]] supports the timed variation of
        input parameters to its nodes: it is possible to translate the
        TTML <code>&lt;animate&gt;</code> semantics directly into
        [[webaudio]] API calls to achieve the equivalent effect.</li>
    </ul>

  </section> <!-- #audio-mixing -->

<section id="profiles-section" class="appendix">
    <h3>Profiles</h3>
    <p>This section defines
      a [[ttml2]] <a>content profile</a>
      and a <a>processor profile</a>
      by expressing dispositions against a set of <a>Features</a> and <a>Extensions</a>.
      The DAPT extensions are defined in <a href="#extensions-section"></a>.
    </p>
    <p>The Profile Semantics specified in [[ttml2]] apply.</p>
    <p>
      A TTML <dfn data-cite="ttml2#terms-profile">Profile</dfn> specification is
      a document that lists all the features of TTML that are required / optional / prohibited
      within “document instances” (files) and “processors” (things that process the files),
      and any extensions or constraints.
    </p>
    <p>
      A <dfn data-cite="ttml2#terms-document-instance">Document Instance</dfn>
      that conforms to the <a>content profile</a> defined herein:
    </p>
    <ul style="list-style-type:disc">
      <li>MUST satisfy all normative provisions specified by the profile;</li>
      <li>MAY include any vocabulary, syntax or attribute value associated with a <a>Feature</a> or <a>Extension</a> whose disposition is permitted or optional in the profile;</li>
      <li>MUST include any vocabulary, syntax or attribute value associated with a <a>Feature</a> or <a>Extension</a> whose disposition is required in the profile.</li>
      <li>MUST NOT include any vocabulary, syntax or attribute value associated with a <a>Feature</a> or <a>Extension</a> whose disposition is prohibited in the profile.</li>
    </ul>
    <p class="note">
      A <a>Document Instance</a>, by definition, satisfies the requirements of Section 3.1 at [[ttml2]],
      and hence a <a>Document Instance</a> that conforms to a profile defined herein is also a conforming TTML2 Document Instance.
    </p>
    <p>
      A <dfn data-cite="ttml2#terms-presentation-processor">Presentation processor</dfn> that conforms to the <a>processor profile</a> defined in this specification:
    </p>
    <ul style="list-style-type:disc">
      <li>MUST satisfy the Generic Processor Conformance requirements at Section 3.2.1 of [[ttml2]]</li>
      <li>MUST satisfy all normative provisions specified by the profile; and</li>
      <li>MUST implement presentation semantic support for every <a>Feature</a> or <a>Extension</a> designated as permitted or required by the profile, subject to any additional constraints on each <a>Feature</a> as specified by the profile.</li>
      <li>MAY implement presentation semantic support for every <a>Feature</a> or <a>Extension</a> designated as optional or prohibited by the profile, subject to any additional constraints on each <a>Feature</a> as specified by the profile.</li>
    </ul>
    <p>
      A <dfn data-cite="ttml2#terms-transformation-processor">Transformation processor</dfn> that conforms to the <a>processor profile</a> defined in this specification:
    </p>
    <ul style="list-style-type:disc">
      <li>MUST satisfy the Generic Processor Conformance requirements at Section 3.2.1 of [[ttml2]];</li>
      <li>MUST satisfy all normative provisions specified by the profile; and</li>
      <li>MUST implement transformation semantic support for every <a>Feature</a> or <a>Extension</a> designated as permitted or required by the profile, subject to any additional constraints on each <a>Feature</a> as specified by the profile.</li>
      <li>MAY implement transformation semantic support for every <a>Feature</a> or <a>Extension</a> designated as optional or prohibited by the profile, subject to any additional constraints on each <a>Feature</a> as specified by the profile.</li>
    </ul>
    <p>The dispositions required, permitted, optional and prohibited as used in this specification
      map to the [[ttml2]] <dfn data-cite="ttml2#profile-vocabulary-feature"><code>&lt;ttp:feature&gt;</code></dfn>
      and <dfn data-cite="ttml2#profile-vocabulary-extension"><code>&lt;ttp:extension&gt;</code></dfn> elements'
      <code>value</code> attribute values as follows:</p>
    <table class="complex data">
      <thead>
        <tr>
          <th></th>
          <th colspan="2"><a><code>&lt;ttp:feature&gt;</code></a> or <a><code>&lt;ttp:extension&gt;</code></a> <code>value</code> attribute value in</th>
        </tr>
        <tr>
          <th>DAPT disposition</th>
          <th><a>content profile</a></th>
          <th><a>processor profile</a></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>required</td>
          <td>required</td>
          <td>required</td>
        </tr>
        <tr>
          <td>permitted</td>
          <td>optional</td>
          <td>required</td>
        </tr>
        <tr>
          <td>optional</td>
          <td>optional</td>
          <td>optional</td>
        </tr>
        <tr>
          <td>prohibited</td>
          <td>prohibited</td>
          <td>optional</td>
        </tr>
      </tbody>
    </table>
    <p class="note">
      The use of the terms <a>presentation processor</a> 
      and <a>transformation processor</a> within this document does not imply conformance
      <i>per se</i> to any of the Standard Profiles defined in [[ttml2]].
      In other words, it is not considered an error for
      a <a>presentation processor</a> or <a>transformation processor</a>
      to conform to the profile defined in this document
      without also conforming to the TTML2 Presentation Profile or the TTML2 Transformation Profile.
    </p>
    <p class="note">
      The use of the [[ttml2]] <a href="https://www.w3.org/TR/ttml2/#vocabulary-profiling">profiling</a>
      sub-system to describe DAPT conformance within this specification
      is not intended imply that DAPT processors are required to support any features of that
      system other than those for which support is explicitly required by DAPT.
    </p>
    <p class="note">
      This document does not specify <a>presentation processor</a> or <a>transformation processor</a> behavior
      when processing or transforming a non-conformant <a>Document Instance</a>.
    </p>
    <p class="note">
      The permitted and prohibited dispositions do not refer to the specification of
      a <a><code>&lt;ttp:feature&gt;</code></a> or <a><code>&lt;ttp:extension&gt;</code></a> element
      as being permitted or prohibited within a <dfn data-cite="ttml2#profile-vocabulary-profile"><code>&lt;ttp:profile&gt;</code></dfn> element.
    </p>
    <section id="features-and-extensions-section">
      <h4>Disposition of Features and Extensions</h4>
      <p>The <a>Features</a> and <a>Extensions</a> listed in this section express the
        minimal requirements for <a>Document Instances</a>,
        <a>Presentation Processors</a>,
        and <a>Transformation Processors</a>.
        DAPT <a>Document Instances</a> MAY additionally conform to other profiles,
        and include syntax not prohibited by the DAPT <a>content profile</a>.
        <a>Presentation Processors</a> and <a>Transformation Processors</a>
        MAY support additional syntax and semantics relating to other profiles.</p>
      <p class="note">For example, a <a>DAPT Script</a> can include syntax permitted
        by the IMSC ([[ttml-imsc1.2]]) profiles of [[ttml2]] to enhance the presentation
        of <a>scripts</a> to actors recording audio,
        or to add styling important for later usage in subtitle or caption creation.
      </p>
      <p class="ednote">Editorial task: go through this list of <a>Features</a> and check the disposition of each.
        There should be no prohibited features that are permitted in IMSC.</p>
      <table class="simple" id="table-features-and-extensions">
        <thead>
          <tr>
            <th style="width:20%" style="text-align:center">Feature or Extension</th>
            <th style="width:10%" style="text-align:center">Disposition</th>
            <th style="text-align:center">Additional provision</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td colspan="3" style="text-align:center"><em>Relative to the TT Feature namespace</em></td>
          </tr>
          <tr>
            <td><code>#animate-minimal</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#animate-fill</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#animation-out-of-line</code></td>
            <td><span class="prohibited label">prohibited</span></td>
            <td>See <a href="#mixing-instruction"></a>.</td>
          </tr>
          <tr>
            <td><code>#audio</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#audio-description</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#audio-speech</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#bidi</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#bidi-version-2</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#chunk</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#clockMode</code></td>
            <td><span class="prohibited label">prohibited</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#clockMode-gps</code></td>
            <td><span class="prohibited label">prohibited</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#clockMode-local</code></td>
            <td><span class="prohibited label">prohibited</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#clockMode-utc</code></td>
            <td><span class="prohibited label">prohibited</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#content</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td> <dfn data-cite="ttml2#feature-contentProfiles"><code>#contentProfiles</code></dfn></td>
            <td><span class="optional label">optional</span></td>
            <td>See <a href="#content-profiles"></a>
              and <a href="#extension-contentProfiles-root"></a>.</td>
          </tr>
          <tr>
            <td><code>#contentProfiles-combined</code></td>
            <td><span class="optional label">optional</span></td>
            <td>See <a href="#ttml2-profile-attr-vocab"></a>.</td>
          </tr>
          <tr>
            <td><code>#core</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#data</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#direction</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#dropMode</code></td>
            <td><span class="prohibited label">prohibited</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#dropMode-dropNTSC</code></td>
            <td><span class="prohibited label">prohibited</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#dropMode-dropPAL</code></td>
            <td><span class="prohibited label">prohibited</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#dropMode-nonDrop</code></td>
            <td><span class="prohibited label">prohibited</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#embedded-audio</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#embedded-data</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#frameRate</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td>
              See [[[#framerate-section]]].
            </td>
          </tr>
          <tr>
            <td><code>#frameRateMultiplier</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#gain</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#markerMode</code></td>
            <td><span class="prohibited label">prohibited</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#markerMode-continuous</code></td>
            <td><span class="prohibited label">prohibited</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#markerMode-discontinuous</code></td>
            <td><span class="prohibited label">prohibited</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#metadata</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#metadata-item</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#metadata-version-2</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#pan</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#permitFeatureNarrowing</code></td>
            <td><span class="optional label">optional</span></td>
            <td>See <a href="#ttml2-profile-attr-vocab"></a>.</td>
          </tr>
          <tr>
            <td><code>#permitFeatureWidening</code></td>
            <td><span class="optional label">optional</span></td>
            <td>See <a href="#ttml2-profile-attr-vocab"></a>.</td>
          </tr>
          <tr>
            <td><code>#pitch</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#presentation-audio</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#processorProfiles</code></td>
            <td><span class="optional label">optional</span></td>
            <td>See <a href="#processor-profiles"></a>.</td>
          </tr>
          <tr>
            <td><code>#processorProfiles-combined</code></td>
            <td><span class="optional label">optional</span></td>
            <td>See <a href="#ttml2-profile-attr-vocab"></a>.</td>
          </tr>
          <tr>
            <td><code>#profile</code></td>
            <td>partially permitted</td>
            <td>
              See <a href="#ttp-profile"></a>.
            </td>
          </tr>
          <tr>
            <td><code>#profile-full-version-2</code></td>
            <td>partially permitted</td>
            <td>
              See <a href="#ttml2-profile-attr-vocab"></a>.
            </td>
          </tr>
          <tr>
            <td><code>#profile-version-2</code></td>
            <td>partially permitted</td>
            <td>
              See <a href="#ttml2-profile-attr-vocab"></a>.
            </td>
          </tr>
          <tr>
            <td><code>#resources</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#set</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#set-fill</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#set-multiple-styles</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#source</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#speak</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#speech</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#structure</code></td>
            <td><span class="required label">required</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#styling</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#styling-chained</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#styling-inheritance-content</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#styling-inline</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#styling-referential</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#subFrameRate</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#tickRate</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td>See [[[#tickrate-section]]].</td>
          </tr>
          <tr>
            <td><code>#time-clock</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#time-clock-with-frames</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td>See [[[#framerate-section]]] and [[[#time-clock-with-frames-section]]].</td>
          </tr>
          <tr>
            <td><code>#time-offset-with-frames</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td>See [[[#framerate-section]]].</td>
          </tr>
          <tr>
            <td><code>#time-offset-with-ticks</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td>See [[[#tickrate-section]]].</td>
          </tr>
          <tr>
            <td><code>#time-offset</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#time-wall-clock</code></td>
            <td><span class="prohibited label">prohibited</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#timeBase-clock</code></td>
            <td><span class="prohibited label">prohibited</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#timeBase-media</code></td>
            <td><span class="required label">required</span></td>
            <td>
              <p>See [[[#timebase-section]]].</p>
              <p class="inline-note">NOTE: [[TTML1]] specifies that the default timebase is <code>"media"</code> if
              <code>ttp:timeBase</code> is not specified on <code>tt</code>.</p>
            </td>
          </tr>
          <tr>
            <td><code>#timeBase-smpte</code></td>
            <td><span class="prohibited label">prohibited</span></td>
            <td></td>
          </tr>
          <tr>
            <td><code>#timeContainer</code></td>
            <td><span class="prohibited label">prohibited</span></td>
            <td>See [[[#timecontainer-section]]].</td>
          </tr>
          <tr>
            <td><code>#timing</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td>See [[[#time-expression-section]]].</td>
          </tr>
          <tr>
            <td><code>#transformation</code></td>
            <td><span class="permitted label">permitted</span></td>
            <td>
              See constraints at <a href="#profile-constraints">#profile</a>.
            </td>
          </tr>
          <tr>
            <td colspan="3" style="text-align:center"><em>Relative to the <a>DAPT Extension</a> namespace</em></td>
          </tr>
          <tr>
            <td><a href="#extension-agent"><code>#agent</code></a></td>
            <td><span class="permitted label">permitted</span></td>
            <td>
              This is the profile expression of <a href="#character"></a>.
            </td>
          </tr>
          <tr>
            <td><a href="#extension-contentProfiles-root"><code>#contentProfiles-root</code></a></td>
            <td><span class="required label">required</span></td>
            <td>
              This is the profile expression of <a href="#content-profiles"></a>.
            </td>
          </tr>
          <tr>
            <td><a href="#extension-onScreen"><code>#onScreen</code></a></td>
            <td><span class="permitted label">permitted</span></td>
            <td>
              This is the profile expression of <a href="#on-screen"></a>.
            </td>
          </tr>
          <tr>
            <td><a href="#extension-profile-root"><code>#profile-root</code></a></td>
            <td><span class="prohibited label">prohibited</span></td>
            <td>
              This is the profile expression of <a href="#ttp-profile"></a>.
            </td>
          </tr>
          <tr>
            <td><a href="#extension-scriptType-root"><code>#scriptType-root</code></a></td>
            <td><span class="required label">required</span></td>
            <td>
              This is the profile expression of <a href="#script-type"></a>.
            </td>
          </tr>
          <tr>
            <td><a href="#extension-serialization"><code>#serialization</code></a></td>
            <td><span class="required label">required</span></td>
            <td>
              This is the profile expression of <a href="#Document Encoding"></a>.
            </td>
          </tr>
          <tr>
            <td><a href="#extension-source-data"><code>#source-data</code></a></td>
            <td><span class="prohibited label">prohibited</span></td>
            <td>
              This is the profile expression of the prohibition of <code>&lt;source&gt;</code>
              child elements of <code>&lt;data&gt;</code> elements as specified in
              <a href="#audio-recording"></a>.
            </td>
          </tr>
          <tr>
            <td><a href="#extension-textLanguageSource"><code>#textLanguageSource</code></a></td>
            <td><span class="required label">required</span></td>
            <td>
              This is the profile expression of <a href="#text-language-source"></a> as required at <a href="#text"></a>.
            </td>
          </tr>
          <tr>
            <td><a href="#extension-xmlId-div"><code>#xmlId-div</code></a></td>
            <td><span class="required label">required</span></td>
            <td>
              This is the profile expression of <a href="#script-event"></a>.
            </td>
          </tr>
          <tr>
            <td><a href="#extension-xmlLang-audio-nonMatching"><code>#xmlLang-audio-nonMatching</code></a></td>
            <td><span class="required label">prohibited</span></td>
            <td>
              This is the profile expression of the prohibition of <code>xml:lang</code>
              on <code>&lt;audio&gt;</code> having a different computed value to the
              parent element and descendant or referenced <code>&lt;source&gt;</code>
              and <code>&lt;data&gt;</code> elements, as specified in
              <a href="#audio-recording"></a>.
            </td>
          </tr>
          <tr>
            <td><a href="#extension-xmlLang-root"><code>#xmlLang-root</code></a></td>
            <td><span class="required label">required</span></td>
            <td>
              This is the profile expression of <a href="#primary-language"></a>.
            </td>
          </tr>
        </tbody>
      </table>
    </section>

      <section id="content-profile">
        <h4>DAPT Content Profile</h4>
        <p>The DAPT Content Profile expresses the conformance requirements of <a>DAPT Scripts</a>
          using the profile mechanism of [[ttml2]].
          It can be used by a validating processor that supports the DAPT Processor Profile
          to validate a DAPT <a>Document Instance</a>.</p>
        <p>There is no requirement to include the DAPT Content Profile within a <a>Document Instance</a>.</p>
        <pre class="xml" data-include="profiles/dapt-content-profile.xml" data-include-format="text"></pre>
      </section>

      <section id="processor-profile">
        <h4>DAPT Processor Profile</h4>
        <p>The DAPT Processor Profile expresses the processing requirements of <a>DAPT Scripts</a>
          using the profile mechanism of [[ttml2]].
          A processor that supports the required features and extensions of the DAPT Processor Profile
          can, minimally, process all permitted features within a DAPT <a>Document Instance</a>.</p>
        <p>There is no requirement to include the DAPT Processor Profile within a <a>Document Instance</a>.</p>
        <pre class="xml" data-include="profiles/dapt-processor-profile.xml" data-include-format="text"></pre>
    </section>

  </section> <!-- profiles-section -->

  <section id="extensions-section" class="appendix">
    <h2>Extensions</h2>
    <section id="extensions-general">
      <h3>General</h3>
      <p>The following sections define <a href="https://www.w3.org/TR/ttml2/#terms-extension">extension</a> designations,
        expressed as relative URIs (fragment identifiers)
        relative to the <a>DAPT Extension</a> Namespace base URI.
        These extension designations are used in <a href="#profiles-section"></a>
        to describe the normative provisions of DAPT that are not expressed
        by [[ttml2]] profile features.
      </p>
    </section>

      <section id="extension-agent">
      <h3>#agent</h3>
      <p>A <a>transformation processor</a> supports the <code>#agent</code> extension if
        it recognizes and is capable of transforming values of the following
        elements and attributes on
        the <code>&lt;ttm:agent&gt;</code> element:</p>
      <ul>
        <li><code>xml:id</code> attribute</li>
        <li><code>&lt;ttm:name&gt;</code> element</li>
      </ul>
      <p>and if it recognizes and is capable of transforming each of the following value combinations:</p>
      <ul>
        <li><code>&lt;ttm:agent&gt;</code> element with <code>type="person"</code>
          and child <code>&lt;ttm:name&gt;</code> element with <code>type="full"</code>;</li>
          <li><code>&lt;ttm:agent&gt;</code> element with <code>type="character"</code>
            and child <code>&lt;ttm:name&gt;</code> element with <code>type="alias"</code>;</li>
        </ul>

      <p>A <a>presentation processor</a> supports the <code>#agent</code> extension if
        it implements presentation semantic support of the above listed
        elements, attributes and value combinations.</p>
      </section>

    <section id="extension-contentProfiles-root">
      <h3>#contentProfiles-root</h3>
      <p>A <a>transformation processor</a> supports the <code>#contentProfiles-root</code> extension if
        it recognizes and is capable of transforming values of the
        <a><code>ttp:contentProfiles</code></a> attribute on the <code>&lt;tt&gt;</code> element.</p>

      <p>A <a>presentation processor</a> supports the <code>#contentProfiles-root</code> extension if
        it implements presentation semantic support of the
        <a><code>ttp:contentProfiles</code></a> attribute on the <code>&lt;tt&gt;</code> element.</p>

      <aside class="note">This extension is defined as a subset of
        <code><a>#contentProfiles</a></code>
        to avoid requiring processor support for
        the <a><code>ttp:profile</code></a> attribute and
        processor profile inference semantics.
      </aside>
      </section>

      <section id="extension-onScreen">
        <h3>#onScreen</h3>
        <p>A <a>transformation processor</a> supports the <code>#onScreen</code> extension if
          it recognizes and is capable of transforming values of the
          <a><code>daptm:onScreen</code></a> attribute on the <code>&lt;div&gt;</code> element.</p>
  
        <p>A <a>presentation processor</a> supports the <code>#onScreen</code> extension if
          it implements presentation semantic support of the
          <a><code>daptm:onScreen</code></a> attribute on the <code>&lt;div&gt;</code> element.</p>
      </section>

      <section id="extension-profile-root">
        <h3>#profile-root</h3>
        <p>A <a>transformation processor</a> supports the <code>#profile-root</code> extension if
          it recognizes and is capable of transforming values of the
          <a><code>ttp:profile</code></a> attribute on the <code>&lt;tt&gt;</code> element.</p>
  
        <p>A <a>presentation processor</a> supports the <code>#profile-root</code> extension if
          it implements presentation semantic support of the
          <a><code>ttp:profile</code></a> attribute on the <code>&lt;tt&gt;</code> element.</p>
      </section>
  
        <section id="extension-scriptType-root">
        <h3>#scriptType-root</h3>
        <p>A <a>transformation processor</a> supports the <code>#scriptType-root</code> extension if
          it recognizes and is capable of transforming values of the
          <a><code>daptm:scriptType</code></a> attribute on the <code>&lt;tt&gt;</code> element.</p>
  
        <p>A <a>presentation processor</a> supports the <code>#scriptType-root</code> extension if
          it implements presentation semantic support of the
          <a><code>daptm:scriptType</code></a> attribute on the <code>&lt;tt&gt;</code> element.</p>

        <p>An example of a <a>transformation processor</a> that supports this extension is
          a validating processor that provides appropriate feedback, for example warnings,
          when the SHOULD requirements defined in <a href="#script-type"></a> for a
          <a>DAPT Document</a>'s <a><code>daptm:scriptType</code></a> are not met,
          and that reports an error if the extension is required by a
          <a>content profile</a> but the <a>Document Instance</a> claiming
          conformance to that profile either does not have a
          <a><code>daptm:scriptType</code></a> attribute on the <code>&lt;tt&gt;</code> element
          or has one whose value is not defined herein.</p>

      </section>

      <section id="extension-serialization">
        <h3>#serialization</h3>
        <p>A serialized document that is valid with respect to the <code>#serialization</code>
          extension is
          an XML 1.0 [[xml]] document encoded using
          UTF-8 character encoding as specified in [[UNICODE]],
          that contains no entity declarations and
          no entity references other than to predefined entities.</p>

        <p>A <a>transformation processor</a> or a <a>presentation processor</a> supports
          the <code>#serialization</code> extension if
          it can read a serialized document as defined above.</p>
  
        <p>A <a>transformation processor</a> that writes documents supports
          the <code>#serialization</code> extension if
          it can write a serialized document as defined above.</p>
      </section>

      <section id="extension-source-data">
        <h3>#source-data</h3>
        <p>A <a>transformation processor</a> supports the <code>#source-data</code> extension if
          it recognizes and is capable of transforming values of the
          <a href="https://www.w3.org/TR/ttml2/#embedded-content-vocabulary-source">&lt;source&gt;</a> element
          child of a
          <a href="https://www.w3.org/TR/ttml2/#embedded-content-vocabulary-data">&lt;data&gt;</a> element.</p>
  
        <p>A <a>presentation processor</a> supports the <code>#source-data</code> extension if
          it implements presentation semantic support of the
          <a href="https://www.w3.org/TR/ttml2/#embedded-content-vocabulary-source">&lt;source&gt;</a> element
          child of a
          <a href="https://www.w3.org/TR/ttml2/#embedded-content-vocabulary-data">&lt;data&gt;</a> element.</p>
      </section>

      <section id="extension-textLanguageSource">
        <h3>#textLanguageSource</h3>
        <p>A <a>transformation processor</a> supports the <code>#textLanguageSource</code> extension if
          it recognizes and is capable of transforming values of the
          <code>daptm:langSrc</code> attribute on the <code>&lt;p&gt;</code> element.</p>
  
        <p>A <a>presentation processor</a> supports the <code>#textLanguageSource</code> extension if
          it implements presentation semantic support of the
          <code>daptm:langSrc</code> attribute on the <code>&lt;p&gt;</code> element.</p>
      </section>

      <section id="extension-xmlId-div">
        <h3>#xmlId-div</h3>
        <p>A <a>transformation processor</a> supports the <code>#xmlId-div</code> extension if
          it recognizes and is capable of transforming values of the
          <code>xml:id</code> attribute on the <code>&lt;div&gt;</code> element.</p>
  
        <p>A <a>presentation processor</a> supports the <code>#xmlId-div</code> extension if
          it implements presentation semantic support of the
          <code>xml:id</code> attribute on the <code>&lt;div&gt;</code> element.</p>
        </section>

      <section id="extension-xmlLang-audio-nonMatching">
        <h3>#xmlLang-audio-nonMatching</h3>
        <p>A <a>transformation processor</a> supports the <code>#xmlLang-audio-nonMatching</code> extension if
          it recognizes and is capable of transforming values of the
          <code>xml:lang</code> attribute on the <code>&lt;audio&gt;</code> element
          that differ from the computed value of the same attribute of its
          parent element or any of its descendant or referenced
          <code>&lt;source&gt;</code> or <code>&lt;data&gt;</code> elements,
          known as <dfn>non-matching</dfn> values.</p>
  
        <p>A <a>presentation processor</a> supports the <code>#xmlLang-audio-nonMatching</code> extension if
          it implements presentation semantic support of such <a>non-matching</a>
          <code>xml:lang</code> attribute values.</p>
      </section>
  
      <section id="extension-xmlLang-root">
        <h3>#xmlLang-root</h3>
        <p>A <a>transformation processor</a> supports the <code>#xmlLang-root</code> extension if
          it recognizes and is capable of transforming values of the
          <code>xml:lang</code> attribute on the <code>&lt;tt&gt;</code> element.</p>
  
        <p>A <a>presentation processor</a> supports the <code>#xmlLang-root</code> extension if
          it implements presentation semantic support of the
          <code>xml:lang</code> attribute on the <code>&lt;tt&gt;</code> element.</p>
        </section>
    </section> <!-- extensions-->

  <section id="acknowledgements">
      <h2>Acknowledgments</h2>
      The editors would like to thank XXX for their contributions to this specification.
  </section>

  </body>
</html>
